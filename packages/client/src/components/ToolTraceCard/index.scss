@import '../../styles/tokens.scss';

.tool-trace-card {
  width: 100%;
  background: $bg-card;
  border-radius: 24rpx;
  padding: 28rpx 32rpx;
  box-sizing: border-box;
  border: 1rpx solid $border;
  display: flex;
  flex-direction: column;
  gap: 20rpx;

  .card-header {
    display: flex;
    align-items: center;
    gap: 20rpx;
  }

  .status-icon {
    width: 52rpx;
    height: 52rpx;
    border-radius: 16rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba($text-muted, 0.12);

    .icon {
      width: 28rpx;
      height: 28rpx;
      background-size: contain;
      background-repeat: no-repeat;
    }
  }

  .header-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6rpx;

    .tool-title {
      font-size: 28rpx;
      font-weight: 600;
      color: $text-primary;
    }

    .tool-subtitle {
      font-size: 24rpx;
      color: $text-secondary;
    }
  }

  .status-badge {
    height: 40rpx;
    padding: 4rpx 16rpx;
    border-radius: 10rpx;
    background: rgba($text-muted, 0.12);
    display: flex;
    align-items: center;

    .status-text {
      font-size: 22rpx;
      font-weight: 500;
      color: $text-muted;
    }
  }

  .card-body {
    .detail-text {
      font-size: 26rpx;
      color: $text-primary;
      line-height: 1.6;
    }
  }

  .progress {
    display: flex;
    align-items: center;
    gap: 16rpx;

    .progress-track {
      flex: 1;
      height: 10rpx;
      background: $border;
      border-radius: 999rpx;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      border-radius: 999rpx;
      background: $text-muted;
      transition: width 0.3s ease;
    }

    .progress-text {
      font-size: 22rpx;
      color: $text-muted;
    }
  }

  .card-footer {
    .meta-text {
      font-size: 22rpx;
      color: $text-muted;
    }
  }

  &.status-pending {
    border-left: 6rpx solid $text-muted;

    .status-icon {
      background: rgba($text-muted, 0.12);

      .icon {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%238E8E93' stroke-width='2'%3E%3Ccircle cx='12' cy='12' r='6'/%3E%3C/svg%3E");
      }
    }
  }

  &.status-running {
    border-left: 6rpx solid $info;

    .status-icon {
      background: rgba($info, 0.12);

      .icon {
        border: 3rpx solid $info;
        border-top-color: transparent;
        border-radius: 50%;
        animation: tool-trace-spin 0.8s linear infinite;
        background: none;
      }
    }

    .status-badge {
      background: rgba($info, 0.12);
      .status-text { color: $info; }
    }

    .progress-bar {
      background: $info;
    }

    .progress-text {
      color: $info;
    }
  }

  &.status-success {
    border-left: 6rpx solid $primary;

    .status-icon {
      background: rgba($primary, 0.12);

      .icon {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%237C9070' stroke-width='2'%3E%3Cpolyline points='20 6 9 17 4 12'/%3E%3C/svg%3E");
      }
    }

    .status-badge {
      background: rgba($primary, 0.12);
      .status-text { color: $primary; }
    }

    .progress-bar {
      background: $primary;
    }

    .progress-text {
      color: $primary;
    }
  }

  &.status-failed {
    border-left: 6rpx solid $warning;

    .status-icon {
      background: rgba($warning, 0.12);

      .icon {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%23D4845E' stroke-width='2'%3E%3Cline x1='18' y1='6' x2='6' y2='18'/%3E%3Cline x1='6' y1='6' x2='18' y2='18'/%3E%3C/svg%3E");
      }
    }

    .status-badge {
      background: rgba($warning, 0.12);
      .status-text { color: $warning; }
    }

    .progress-bar {
      background: $warning;
    }

    .progress-text {
      color: $warning;
    }
  }

  &.status-timeout {
    border-left: 6rpx solid $purple;

    .status-icon {
      background: rgba($purple, 0.12);

      .icon {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%239B8AA8' stroke-width='2'%3E%3Ccircle cx='12' cy='12' r='9'/%3E%3Cpath d='M12 7v5l3 3'/%3E%3C/svg%3E");
      }
    }

    .status-badge {
      background: rgba($purple, 0.12);
      .status-text { color: $purple; }
    }

    .progress-bar {
      background: $purple;
    }

    .progress-text {
      color: $purple;
    }
  }

  &.status-canceled {
    border-left: 6rpx solid $text-muted;

    .status-icon {
      background: rgba($text-muted, 0.12);

      .icon {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%238E8E93' stroke-width='2'%3E%3Ccircle cx='12' cy='12' r='9'/%3E%3Cline x1='8' y1='12' x2='16' y2='12'/%3E%3C/svg%3E");
      }
    }
  }
}

@keyframes tool-trace-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
