module.exports=[99846,(a,b,c)=>{a.e,b.exports=function(){var b=function(a,c){return(b=Object.setPrototypeOf||(({__proto__:[]})instanceof Array?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}))(a,c)},c=function(){return(c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function d(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||((d=d||Array.prototype.slice.call(b,0,e))[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var e="u">typeof globalThis?globalThis:"u">typeof self?self:a.g,f=Object.keys,g=Array.isArray;function h(a,b){return"object"==typeof b&&f(b).forEach(function(c){a[c]=b[c]}),a}"u"<typeof Promise||e.Promise||(e.Promise=Promise);var i=Object.getPrototypeOf,j={}.hasOwnProperty;function k(a,b){return j.call(a,b)}function l(a,b){"function"==typeof b&&(b=b(i(a))),("u"<typeof Reflect?f:Reflect.ownKeys)(b).forEach(function(c){n(a,c,b[c])})}var m=Object.defineProperty;function n(a,b,c,d){m(a,b,h(c&&k(c,"get")&&"function"==typeof c.get?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function o(a){return{from:function(b){return a.prototype=Object.create(b.prototype),n(a.prototype,"constructor",a),{extend:l.bind(null,a.prototype)}}}}var p=Object.getOwnPropertyDescriptor,q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw Error("Assertion Failed")}function u(a){e.setImmediate?setImmediate(a):setTimeout(a,0)}function v(a,b){if("string"==typeof b&&k(a,b))return a[b];if(!b)return a;if("string"!=typeof b){for(var c=[],d=0,e=b.length;d<e;++d){var f=v(a,b[d]);c.push(f)}return c}var g,h=b.indexOf(".");return -1===h||null==(g=a[b.substr(0,h)])?void 0:v(g,b.substr(h+1))}function w(a,b,c){if(a&&void 0!==b&&!("isFrozen"in Object&&Object.isFrozen(a)))if("string"!=typeof b&&"length"in b){t("string"!=typeof c&&"length"in c);for(var d=0,e=b.length;d<e;++d)w(a,b[d],c[d])}else{var f,h,i=b.indexOf(".");-1!==i?(f=b.substr(0,i),""===(i=b.substr(i+1))?void 0===c?g(a)&&!isNaN(parseInt(f))?a.splice(f,1):delete a[f]:a[f]=c:w(h=(h=a[f])&&k(a,f)?h:a[f]={},i,c)):void 0===c?g(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function x(a){var b,c={};for(b in a)k(a,b)&&(c[b]=a[b]);return c}var y=[].concat;function z(a){return y.apply([],a)}var A="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(z([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return e[a]}),B=new Set(A.map(function(a){return e[a]})),C=null;function D(a){return C=new WeakMap,a=function a(b){if(!b||"object"!=typeof b)return b;var c=C.get(b);if(c)return c;if(g(b)){c=[],C.set(b,c);for(var d=0,e=b.length;d<e;++d)c.push(a(b[d]))}else if(B.has(b.constructor))c=b;else{var f,h=i(b);for(f in c=h===Object.prototype?{}:Object.create(h),C.set(b,c),b)k(b,f)&&(c[f]=a(b[f]))}return c}(a),C=null,a}var E={}.toString;function F(a){return E.call(a).slice(8,-1)}var G="u">typeof Symbol?Symbol.iterator:"@@iterator",H="symbol"==typeof G?function(a){var b;return null!=a&&(b=a[G])&&b.apply(a)}:function(){return null};function I(a,b){0<=(b=a.indexOf(b))&&a.splice(b,1)}var J={};function K(a){var b,c,d,e;if(1==arguments.length){if(g(a))return a.slice();if(this===J&&"string"==typeof a)return[a];if(e=H(a))for(c=[];!(d=e.next()).done;)c.push(d.value);else{if(null==a||"number"!=typeof(b=a.length))return[a];for(c=Array(b);b--;)c[b]=a[b]}}else for(b=arguments.length,c=Array(b);b--;)c[b]=arguments[b];return c}var L="u">typeof Symbol?function(a){return"AsyncFunction"===a[Symbol.toStringTag]}:function(){return!1},A=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],M=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(A),N={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function O(a,b){this.name=a,this.message=b}function P(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function Q(a,b,c,d){this.failures=b,this.failedKeys=d,this.successCount=c,this.message=P(a,b)}function R(a,b){this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=P(a,this.failures)}o(O).from(Error).extend({toString:function(){return this.name+": "+this.message}}),o(Q).from(O),o(R).from(O);var S=M.reduce(function(a,b){return a[b]=b+"Error",a},{}),T=M.reduce(function(a,b){var c=b+"Error";function d(a,d){this.name=c,a?"string"==typeof a?(this.message="".concat(a).concat(d?"\n "+d:""),this.inner=d||null):"object"==typeof a&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=N[b]||c,this.inner=null)}return o(d).from(O),a[b]=d,a},{}),U=(T.Syntax=SyntaxError,T.Type=TypeError,T.Range=RangeError,A.reduce(function(a,b){return a[b+"Error"]=T[b],a},{}));function V(){}function W(a){return a}function X(a,b){return null==a||a===W?b:function(c){return b(a(c))}}function Y(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Z(a,b){return a===V?b:function(){var c=a.apply(this,arguments),d=(void 0!==c&&(arguments[0]=c),this.onsuccess),e=this.onerror,f=(this.onsuccess=null,this.onerror=null,b.apply(this,arguments));return d&&(this.onsuccess=this.onsuccess?Y(d,this.onsuccess):d),e&&(this.onerror=this.onerror?Y(e,this.onerror):e),void 0!==f?f:c}}function $(a,b){return a===V?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,b.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Y(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Y(d,this.onerror):d)}}function _(a,b){return a===V?b:function(c){var d=a.apply(this,arguments),c=(h(c,d),this.onsuccess),e=this.onerror,f=(this.onsuccess=null,this.onerror=null,b.apply(this,arguments));return c&&(this.onsuccess=this.onsuccess?Y(c,this.onsuccess):c),e&&(this.onerror=this.onerror?Y(e,this.onerror):e),void 0===d?void 0===f?void 0:f:h(d,f)}}function aa(a,b){return a===V?b:function(){return!1!==b.apply(this,arguments)&&a.apply(this,arguments)}}function ab(a,b){return a===V?b:function(){var c=a.apply(this,arguments);if(c&&"function"==typeof c.then){for(var d=this,e=arguments.length,f=Array(e);e--;)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}(A=M.reduce(function(a,b){return -1===["Syntax","Type","Range"].indexOf(b)&&(a[b+"Error"]=T[b]),a},{})).ModifyError=Q,A.DexieError=O,A.BulkError=R;var ac="u">typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),ad={},ae="u"<typeof Promise?[]:(M=Promise.resolve(),"u">typeof crypto&&crypto.subtle?[ae=crypto.subtle.digest("SHA-512",new Uint8Array([0])),i(ae),M]:[M,i(M),M]),M=ae[0],af=ae[1],af=af&&af.then,ag=M&&M.constructor,ah=!!ae[2],ai=function(a,b){aq.push([a,b]),ak&&(queueMicrotask(aA),ak=!1)},aj=!0,ak=!0,al=[],am=[],an=W,ao={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:V,pgp:!1,env:{},finalize:V},ap=ao,aq=[],ar=0,as=[];function at(a){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var b=this._PSD=ap;if("function"!=typeof a){if(a!==ad)throw TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],!1===this._state&&aw(this,this._value)}else this._state=null,this._value=null,++b.ref,function a(b,c){try{c(function(c){if(null===b._state){if(c===b)throw TypeError("A promise cannot be resolved with itself.");var d=b._lib&&aB();c&&"function"==typeof c.then?a(b,function(a,b){c instanceof at?c._then(a,b):c.then(a,b)}):(b._state=!0,b._value=c,ax(b)),d&&aC()}},aw.bind(null,b))}catch(a){aw(b,a)}}(this,a)}var au={get:function(){var a=ap,b=aK;function c(c,d){var e=this,f=!a.global&&(a!==ap||b!==aK),g=f&&!aO(),h=new at(function(b,h){ay(e,new av(aU(c,a,f,g),aU(d,a,f,g),b,h,a))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return c.prototype=ad,c},set:function(a){n(this,"then",a&&a.prototype===ad?au:{get:function(){return a},set:au.set})}};function av(a,b,c,d,e){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d,this.psd=e}function aw(a,b){var c;am.push(b),null===a._state&&(c=a._lib&&aB(),b=an(b),a._state=!1,a._value=b,al.some(function(b){return b._value===a._value})||al.push(a),ax(a),c)&&aC()}function ax(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ay(a,b[c]);var e=a._PSD;--e.ref||e.finalize(),0===ar&&(++ar,ai(function(){0==--ar&&aD()},[]))}function ay(a,b){if(null===a._state)a._listeners.push(b);else{var c=a._state?b.onFulfilled:b.onRejected;if(null===c)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref,++ar,ai(az,[c,a,b])}}function az(a,b,c){try{var d,e=b._value;!b._state&&am.length&&(am=[]),d=ac&&b._consoleTask?b._consoleTask.run(function(){return a(e)}):a(e),b._state||-1!==am.indexOf(e)||(a=>{for(var b=al.length;b;)if(al[--b]._value===a._value)return al.splice(b,1)})(b),c.resolve(d)}catch(a){c.reject(a)}finally{0==--ar&&aD(),--c.psd.ref||c.psd.finalize()}}function aA(){aT(ao,function(){aB()&&aC()})}function aB(){var a=aj;return ak=aj=!1,a}function aC(){var a,b,c;do for(;0<aq.length;)for(a=aq,aq=[],c=a.length,b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}while(0<aq.length)ak=aj=!0}function aD(){for(var a=al,b=(al=[],a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)}),as.slice(0)),c=b.length;c;)b[--c]()}function aE(a){return new at(ad,!1,a)}function aF(a,b){var c=ap;return function(){var d=aB(),e=ap;try{return aR(c,!0),a.apply(this,arguments)}catch(a){b&&b(a)}finally{aR(e,!1),d&&aC()}}}l(at.prototype,{then:au,_then:function(a,b){ay(this,new av(null,null,a,b,ap))},catch:function(a){var b;return 1==arguments.length?this.then(null,a):(b=arguments[1],"function"==typeof a?this.then(null,function(c){return(c instanceof a?b:aE)(c)}):this.then(null,function(c){return(c&&c.name===a?b:aE)(c)}))},finally:function(a){return this.then(function(b){return at.resolve(a()).then(function(){return b})},function(b){return at.resolve(a()).then(function(){return aE(b)})})},timeout:function(a,b){var c=this;return a<1/0?new at(function(d,e){var f=setTimeout(function(){return e(new T.Timeout(b))},a);c.then(d,e).finally(clearTimeout.bind(null,f))}):this}}),"u">typeof Symbol&&Symbol.toStringTag&&n(at.prototype,Symbol.toStringTag,"Dexie.Promise"),ao.env=aS(),l(at,{all:function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){0===a.length&&b([]);var d=a.length;a.forEach(function(e,f){return at.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){return a instanceof at?a:a&&"function"==typeof a.then?new at(function(b,c){a.then(b,c)}):new at(ad,!0,a)},reject:aE,race:function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){a.map(function(a){return at.resolve(a).then(b,c)})})},PSD:{get:function(){return ap},set:function(a){return ap=a}},totalEchoes:{get:function(){return aK}},newPSD:aM,usePSD:aT,scheduler:{get:function(){return ai},set:function(a){ai=a}},rejectionMapper:{get:function(){return an},set:function(a){an=a}},follow:function(a,b){return new at(function(c,d){return aM(function(b,c){var d=ap;d.unhandleds=[],d.onunhandled=c,d.finalize=Y(function(){var a,d=this;a=function(){0===d.unhandleds.length?b():c(d.unhandleds[0])},as.push(function b(){a(),as.splice(as.indexOf(b),1)}),++ar,ai(function(){0==--ar&&aD()},[])},d.finalize),a()},b,c,d)})}}),ag&&(ag.allSettled&&n(at,"allSettled",function(){var a=K.apply(null,arguments).map(aP);return new at(function(b){0===a.length&&b([]);var c=a.length,d=Array(c);a.forEach(function(a,e){return at.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),ag.any&&"u">typeof AggregateError&&n(at,"any",function(){var a=K.apply(null,arguments).map(aP);return new at(function(b,c){0===a.length&&c(AggregateError([]));var d=a.length,e=Array(d);a.forEach(function(a,f){return at.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(AggregateError(e))})})})}),ag.withResolvers)&&(at.withResolvers=ag.withResolvers);var aG={awaits:0,echoes:0,id:0},aH=0,aI=[],aJ=0,aK=0,aL=0;function aM(a,b,c,d){var e=ap,f=Object.create(e),b=(f.parent=e,f.ref=0,f.global=!1,f.id=++aL,ao.env,f.env=ah?{Promise:at,PromiseProp:{value:at,configurable:!0,writable:!0},all:at.all,race:at.race,allSettled:at.allSettled,any:at.any,resolve:at.resolve,reject:at.reject}:{},b&&h(f,b),++e.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},aT(f,a,c,d));return 0===f.ref&&f.finalize(),b}function aN(){return aG.id||(aG.id=++aH),++aG.awaits,aG.echoes+=100,aG.id}function aO(){return!!aG.awaits&&(0==--aG.awaits&&(aG.id=0),aG.echoes=100*aG.awaits,!0)}function aP(a){return aG.echoes&&a&&a.constructor===ag?(aN(),a.then(function(a){return aO(),a},function(a){return aO(),aW(a)})):a}function aQ(){var a=aI[aI.length-1];aI.pop(),aR(a,!1)}function aR(a,b){var c,d,f=ap;(b?!aG.echoes||aJ++&&a===ap:!aJ||--aJ&&a===ap)||queueMicrotask(b?(function(a){++aK,aG.echoes&&0!=--aG.echoes||(aG.echoes=aG.awaits=aG.id=0),aI.push(ap),aR(a,!0)}).bind(null,a):aQ),a!==ap&&(ap=a,f===ao&&(ao.env=aS()),ah)&&(c=ao.env.Promise,d=a.env,f.global||a.global)&&(Object.defineProperty(e,"Promise",d.PromiseProp),c.all=d.all,c.race=d.race,c.resolve=d.resolve,c.reject=d.reject,d.allSettled&&(c.allSettled=d.allSettled),d.any)&&(c.any=d.any)}function aS(){var a=e.Promise;return ah?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject}:{}}function aT(a,b,c,d,e){var f=ap;try{return aR(a,!0),b(c,d,e)}finally{aR(f,!1)}}function aU(a,b,c,d){return"function"!=typeof a?a:function(){var e=ap;c&&aN(),aR(b,!0);try{return a.apply(this,arguments)}finally{aR(e,!1),d&&queueMicrotask(aO)}}}function aV(a){Promise===ag&&0===aG.echoes?0===aJ?a():enqueueNativeMicroTask(a):setTimeout(a,0)}-1===(""+af).indexOf("[native code]")&&(aN=aO=V);var aW=at.reject,aX=String.fromCharCode(65535),aY="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",aZ="String expected.",a$=[],a_="__dbnames",a0="readonly",a1="readwrite";function a2(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var a3={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function a4(a){return"string"!=typeof a||/\./.test(a)?function(a){return a}:function(b){return void 0===b[a]&&a in b&&delete(b=D(b))[a],b}}function a5(){throw T.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function a6(a,b){try{var c=a7(a),d=a7(b);if(c!==d)return"Array"===c?1:"Array"===d?-1:"binary"===c?1:"binary"===d?-1:"string"===c?1:"string"===d?-1:"Date"===c?1:"Date"!==d?NaN:-1;switch(c){case"number":case"Date":case"string":return b<a?1:a<b?-1:0;case"binary":for(var e=a8(a),f=a8(b),g=e.length,h=f.length,i=g<h?g:h,j=0;j<i;++j)if(e[j]!==f[j])return e[j]<f[j]?-1:1;return g===h?0:g<h?-1:1;case"Array":for(var k=a.length,l=b.length,m=k<l?k:l,n=0;n<m;++n){var o=a6(a[n],b[n]);if(0!==o)return o}return k===l?0:k<l?-1:1}}catch(a){}return NaN}function a7(a){var b=typeof a;return"object"==b&&(ArrayBuffer.isView(a)||"ArrayBuffer"===(b=F(a)))?"binary":b}function a8(a){return a instanceof Uint8Array?a:ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}function a9(a,b,c){var d=a.schema.yProps;return d?(b&&0<c.numFailures&&(b=b.filter(function(a,b){return!c.failures[b]})),Promise.all(d.map(function(c){return c=c.updatesTable,b?a.db.table(c).where("k").anyOf(b).delete():a.db.table(c).clear()})).then(function(){return c})):c}function ba(a){this["@@propmod"]=a}function bb(a,b){for(var c=f(b),d=c.length,e=!1,g=0;g<d;++g){var h=c[g],i=b[h],j=v(a,h);i instanceof ba?(w(a,h,i.execute(j)),e=!0):j!==i&&(w(a,h,i),e=!0)}return e}function bc(){}function bd(a){function b(b,d){if(d){for(var e=arguments.length,f=Array(e-1);--e;)f[e-1]=arguments[e];return c[b].subscribe.apply(null,f),a}if("string"==typeof b)return c[b]}var c={};b.addEventType=h;for(var d=1,e=arguments.length;d<e;++d)h(arguments[d]);return b;function h(a,d,e){var i;if("object"!=typeof a)return d=d||aa,i={subscribers:[],fire:e=e||V,subscribe:function(a){-1===i.subscribers.indexOf(a)&&(i.subscribers.push(a),i.fire=d(i.fire,a))},unsubscribe:function(a){i.subscribers=i.subscribers.filter(function(b){return b!==a}),i.fire=i.subscribers.reduce(d,e)}},c[a]=b[a]=i;f(a).forEach(function(b){var c=a[b];if(g(c))h(b,a[b][0],a[b][1]);else{if("asap"!==c)throw new T.InvalidArgument("Invalid event config");var d=h(b,W,function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=arguments[a];d.subscribers.forEach(function(a){u(function(){a.apply(null,b)})})})}})}}function be(a,b){return o(b).from({prototype:a}),b}function bf(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function bg(a,b){a.filter=a2(a.filter,b)}function bh(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return a2(d(),b())}:b,a.justLimit=c&&!d}function bi(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(c)return c;throw new T.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed")}function bj(a,b,c){var d=bi(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:"prev"===a.dir,unique:!!a.unique,query:{index:d,range:a.range}})}function bk(a,b,c,d){var e,f,g=a.replayFilter?a2(a.filter,a.replayFilter()):a.filter;return a.or?(e={},f=function(a,c,d){var f,h;g&&!g(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})||("[object ArrayBuffer]"==(h=""+(f=c.primaryKey))&&(h=""+new Uint8Array(f)),k(e,h))||(e[h]=!0,b(a,c,d))},Promise.all([a.or._iterate(f,c),bl(bj(a,d,c),a.algorithm,f,!a.keysOnly&&a.valueMapper)])):bl(bj(a,d,c),a2(a.algorithm,g),b,!a.keysOnly&&a.valueMapper)}function bl(a,b,c,d){var e=aF(d?function(a,b,e){return c(d(a),b,e)}:c);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a.continue()};b&&!b(a,function(a){return c=a},function(b){a.stop(b),c=V},function(b){a.fail(b),c=V})||e(a.value,a,function(a){return c=a}),c()})})}function bm(){}ba.prototype.execute=function(a){var b=this["@@propmod"];if(void 0!==b.add){var c=b.add;if(g(c))return d(d([],g(a)?a:[],!0),c,!0).sort();if("number"==typeof c)return(Number(a)||0)+c;if("bigint"==typeof c)try{return BigInt(a)+c}catch(a){return BigInt(0)+c}throw TypeError("Invalid term ".concat(c))}if(void 0!==b.remove){var e=b.remove;if(g(e))return g(a)?a.filter(function(a){return!e.includes(a)}).sort():[];if("number"==typeof e)return Number(a)-e;if("bigint"==typeof e)try{return BigInt(a)-e}catch(a){return BigInt(0)-e}throw TypeError("Invalid subtrahend ".concat(e))}return(c=null==(c=b.replacePrefix)?void 0:c[0])&&"string"==typeof a&&a.startsWith(c)?b.replacePrefix[1]+a.substring(c.length):a},bc.prototype._trans=function(a,b,c){var d=this._tx||ap.trans,e=this.name,f=ac&&"u">typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===a?"read":"write"," ").concat(this.name));function g(a,c,d){if(d.schema[e])return b(d.idbtrans,d);throw new T.NotFound("Table "+e+" not part of transaction")}var h=aB();try{var i=d&&d.db._novip===this.db._novip?d===ap.trans?d._promise(a,g,c):aM(function(){return d._promise(a,g,c)},{trans:d,transless:ap.transless||ap}):function a(b,c,d,e){if(b.idbdb&&(b._state.openComplete||ap.letThrough||b._vip)){var f=b._createTransaction(c,d,b._dbSchema);try{f.create(),b._state.PR1398_maxLoop=3}catch(f){return f.name===S.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,e)})):aW(f)}return f._promise(c,function(a,b){return aM(function(){return ap.trans=f,e(a,b,f)})}).then(function(a){if("readwrite"===c)try{f.idbtrans.commit()}catch(a){}return"readonly"===c?a:f._completion.then(function(){return a})})}if(b._state.openComplete)return aW(new T.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return aW(new T.DatabaseClosed);b.open().catch(V)}return b._state.dbReadyPromise.then(function(){return a(b,c,d,e)})}(this.db,a,[this.name],g);return f&&(i._consoleTask=f,i=i.catch(function(a){return console.trace(a),aW(a)})),i}finally{h&&aC()}},bc.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):null==a?aW(new T.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)},bc.prototype.where=function(a){if("string"==typeof a)return new this.db.WhereClause(this,a);if(g(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=f(a);if(1===b.length)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return 0<=a.keyPath.indexOf(b)})){for(var c=0;c<b.length;++c)if(-1===b.indexOf(a.keyPath[c]))return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==aX)return e=c.keyPath.slice(0,b.length),this.where(e).equals(e.map(function(b){return a[b]}));!c&&ac&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(b.join("+"),"]"));var d=this.schema.idxByName,e=b.reduce(function(b,c){var e=b[0],b=b[1],f=d[c],h=a[c];return[e||f,e||!f?a2(b,f&&f.multi?function(a){return g(a=v(a,c))&&a.some(function(a){return 0===a6(h,a)})}:function(a){return 0===a6(h,v(a,c))}):b]},[null,null]),h=e[0],e=e[1];return h?this.where(h.name).equals(a[h.keyPath]).filter(e):c?this.filter(e):this.where(b).equals("")},bc.prototype.filter=function(a){return this.toCollection().and(a)},bc.prototype.count=function(a){return this.toCollection().count(a)},bc.prototype.offset=function(a){return this.toCollection().offset(a)},bc.prototype.limit=function(a){return this.toCollection().limit(a)},bc.prototype.each=function(a){return this.toCollection().each(a)},bc.prototype.toArray=function(a){return this.toCollection().toArray(a)},bc.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},bc.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,g(a)?"[".concat(a.join("+"),"]"):a))},bc.prototype.reverse=function(){return this.toCollection().reverse()},bc.prototype.mapToClass=function(a){for(var c=this.db,d=this.name,e=((this.schema.mappedClass=a).prototype instanceof a5&&(a=(a=>{if("function"!=typeof a&&null!==a)throw TypeError("Class extends value "+String(a)+" is not a constructor or null");function e(){this.constructor=f}function f(){return null!==a&&a.apply(this,arguments)||this}return b(f,a),f.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e),Object.defineProperty(f.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),f.prototype.table=function(){return d},f})(a)),new Set),f=a.prototype;f;f=i(f))Object.getOwnPropertyNames(f).forEach(function(a){return e.add(a)});function g(b){if(!b)return b;var c,d=Object.create(a.prototype);for(c in b)if(!e.has(c))try{d[c]=b[c]}catch(a){}return d}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=g,this.hook("reading",g),a},bc.prototype.defineClass=function(){return this.mapToClass(function(a){h(this,a)})},bc.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a4(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:null!=b?[b]:null,values:[g]})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})},bc.prototype.upsert=function(a,b){var c=this,d=this.schema.primKey.keyPath;return this._trans("readwrite",function(e){return c.core.get({trans:e,key:a}).then(function(f){var g=null!=f?f:{};return bb(g,b),d&&w(g,d,a),c.core.mutate({trans:e,type:"put",values:[g],keys:[a],upsert:!0,updates:{keys:[a],changeSpecs:[b]}}).then(function(a){return a.numFailures?at.reject(a.failures[0]):!!f})})})},bc.prototype.update=function(a,b){return"object"!=typeof a||g(a)?this.where(":id").equals(a).modify(b):void 0===(a=v(a,this.schema.primKey.keyPath))?aW(new T.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(b)},bc.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;return f&&e&&(g=a4(f)(a)),this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:null!=b?[b]:null})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})},bc.prototype.delete=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]}).then(function(c){return a9(b,[a],c)}).then(function(a){return a.numFailures?at.reject(a.failures[0]):void 0})})},bc.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:a3}).then(function(b){return a9(a,null,b)})}).then(function(a){return a.numFailures?at.reject(a.failures[0]):void 0})},bc.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})},bc.prototype.bulkAdd=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,g=c&&g?a.map(a4(c)):a;return d.core.mutate({trans:b,type:"add",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.failures;if(0===b)return f?a.results:a.lastResult;throw new R("".concat(d.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),c)})})},bc.prototype.bulkPut=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0,f=(c=c||(e?void 0:b))?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto,c=c.keyPath;if(c&&e)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length,g=c&&g?a.map(a4(c)):a;return d.core.mutate({trans:b,type:"put",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.failures;if(0===b)return f?a.results:a.lastResult;throw new R("".concat(d.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),c)})})},bc.prototype.bulkUpdate=function(a){var b=this,c=this.core,d=a.map(function(a){return a.key}),e=a.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return c.getMany({trans:g,keys:d,cache:"clone"}).then(function(h){var i=[],j=[],k=(a.forEach(function(a,c){var d=a.key,e=a.changes,g=h[c];if(g){for(var k=0,l=Object.keys(e);k<l.length;k++){var m=l[k],n=e[m];if(m===b.schema.primKey.keyPath){if(0!==a6(n,d))throw new T.Constraint("Cannot update primary key in bulkUpdate()")}else w(g,m,n)}f.push(c),i.push(d),j.push(g)}}),i.length);return c.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:d,changeSpecs:e}}).then(function(a){var c=a.numFailures,d=a.failures;if(0===c)return k;for(var e=0,g=Object.keys(d);e<g.length;e++){var h,i=g[e],j=f[Number(i)];null!=j&&(h=d[i],delete d[i],d[j]=h)}throw new R("".concat(b.name,".bulkUpdate(): ").concat(c," of ").concat(k," operations failed"),d)})})})},bc.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a}).then(function(c){return a9(b,a,c)})}).then(function(a){var d=a.numFailures,e=a.failures;if(0===d)return a.lastResult;throw new R("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),e)})},bm.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,aW.bind(null,c.error)):c.table._trans("readonly",a).then(b)},bm.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,aW.bind(null,b.error)):b.table._trans("readwrite",a,"locked")},bm.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=a2(b.algorithm,a)},bm.prototype._iterate=function(a,b){return bk(this._ctx,a,b,this._ctx.table.core)},bm.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return a&&h(c,a),b._ctx=c,b},bm.prototype.raw=function(){return this._ctx.valueMapper=null,this},bm.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return bk(b,a,c,b.table.core)})},bm.prototype.count=function(a){var b=this;return this._read(function(a){var c,d=b._ctx,e=d.table.core;return bf(d,!0)?e.count({trans:a,query:{index:bi(d,e.schema),range:d.range}}).then(function(a){return Math.min(a,d.limit)}):(c=0,bk(d,function(){return++c,!1},a,e).then(function(){return c}))}).then(a)},bm.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g="next"===this._ctx.dir?1:-1;function h(a,b){return a6(f(a,e),f(b,e))*g}return this.toArray(function(a){return a.sort(h)}).then(b)},bm.prototype.toArray=function(a){var b=this;return this._read(function(a){var c,d,e,f=b._ctx;return"next"===f.dir&&bf(f,!0)&&0<f.limit?(c=f.valueMapper,d=bi(f,f.table.core.schema),f.table.core.query({trans:a,limit:f.limit,values:!0,query:{index:d,range:f.range}}).then(function(a){return a=a.result,c?a.map(c):a})):(e=[],bk(f,function(a){return e.push(a)},a,f.table.core).then(function(){return e}))},a)},bm.prototype.offset=function(a){var b=this._ctx;return a<=0||(b.offset+=a,bf(b)?bh(b,function(){var b=a;return function(a,c){return 0===b||(1===b?--b:c(function(){a.advance(b),b=0}),!1)}}):bh(b,function(){var b=a;return function(){return--b<0}})),this},bm.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),bh(this._ctx,function(){var b=a;return function(a,c,d){return--b<=0&&c(d),0<=b}},!0),this},bm.prototype.until=function(a,b){return bg(this._ctx,function(c,d,e){return!a(c.value)||(d(e),b)}),this},bm.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)},bm.prototype.last=function(a){return this.reverse().first(a)},bm.prototype.filter=function(a){var b;return bg(this._ctx,function(b){return a(b.value)}),(b=this._ctx).isMatch=a2(b.isMatch,a),this},bm.prototype.and=function(a){return this.filter(a)},bm.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},bm.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bm.prototype.desc=function(){return this.reverse()},bm.prototype.eachKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.key,c)})},bm.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},bm.prototype.eachPrimaryKey=function(a){var b=this._ctx;return b.keysOnly=!b.isMatch,this.each(function(b,c){a(c.primaryKey,c)})},bm.prototype.keys=function(a){var b=this._ctx,c=(b.keysOnly=!b.isMatch,[]);return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)},bm.prototype.primaryKeys=function(a){var b=this._ctx;if("next"===b.dir&&bf(b,!0)&&0<b.limit)return this._read(function(a){var c=bi(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){return a.result}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)},bm.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},bm.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)},bm.prototype.lastKey=function(a){return this.reverse().firstKey(a)},bm.prototype.distinct=function(){var a,b=this._ctx,b=b.index&&b.table.schema.idxByName[b.index];return b&&b.multi&&(a={},bg(this._ctx,function(b){var b=b.primaryKey.toString(),c=k(a,b);return a[b]=!0,!c})),this},bm.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){function e(a,b){var c=b.failures;n+=a-b.numFailures;for(var d=0,e=f(c);d<e.length;d++){var g=e[d];m.push(c[g])}}var g="function"==typeof a?a:function(b){return bb(b,a)},h=c.table.core,i=h.schema.primaryKey,j=i.outbound,k=i.extractKey,l=200,i=b.db._options.modifyChunkSize,m=(i&&(l="object"==typeof i?i[h.name]||i["*"]||200:i),[]),n=0,o=[],p=a===bn;return b.clone().primaryKeys().then(function(b){var f=bf(c)&&c.limit===1/0&&("function"!=typeof a||p)&&{index:c.index,range:c.range};return(function i(m){var n=Math.min(l,b.length-m),o=b.slice(m,m+n);return(p?Promise.resolve([]):h.getMany({trans:d,keys:o,cache:"immutable"})).then(function(q){var r=[],s=[],t=j?[]:null,u=p?o:[];if(!p)for(var v=0;v<n;++v){var w=q[v],x={value:D(w),primKey:b[m+v]};!1!==g.call(x,x.value,x)&&(null==x.value?u.push(b[m+v]):j||0===a6(k(w),k(x.value))?(s.push(x.value),j&&t.push(b[m+v])):(u.push(b[m+v]),r.push(x.value)))}return Promise.resolve(0<r.length&&h.mutate({trans:d,type:"add",values:r}).then(function(a){for(var b in a.failures)u.splice(parseInt(b),1);e(r.length,a)})).then(function(){return(0<s.length||f&&"object"==typeof a)&&h.mutate({trans:d,type:"put",keys:t,values:s,criteria:f,changeSpec:"function"!=typeof a&&a,isAdditionalChunk:0<m}).then(function(a){return e(s.length,a)})}).then(function(){return(0<u.length||f&&p)&&h.mutate({trans:d,type:"delete",keys:u,criteria:f,isAdditionalChunk:0<m}).then(function(a){return a9(c.table,u,a)}).then(function(a){return e(u.length,a)})}).then(function(){return b.length>m+n&&i(m+l)})})})(0).then(function(){if(0<m.length)throw new Q("Error modifying one or more objects",m,n,o);return b.length})})})},bm.prototype.delete=function(){var a=this._ctx,b=a.range;return bf(a)&&!a.table.schema.yProps&&(a.isPrimKey||3===b.type)?this._write(function(c){var d=a.table.core.schema.primaryKey;return a.table.core.count({trans:c,query:{index:d,range:b}}).then(function(d){return a.table.core.mutate({trans:c,type:"deleteRange",range:b}).then(function(a){var b=a.failures,a=a.numFailures;if(a)throw new Q("Could not delete some values",Object.keys(b).map(function(a){return b[a]}),d-a);return d-a})})}):this.modify(bn)};var bn=function(a,b){return b.value=null};function bo(a,b){return a<b?-1:+(a!==b)}function bp(a,b){return b<a?-1:+(a!==b)}function bq(a,b,c){return(a=a instanceof bv?new a.Collection(a):a)._ctx.error=new(c||TypeError)(b),a}function br(a){return new a.Collection(a,function(){return bu("")}).limit(0)}function bs(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return"string"==typeof a}))return bq(a,aZ);function m(a){e="next"===a?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()},f="next"===a?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()},g="next"===a?bo:bp;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper}),i=b.map(function(a){return a.lower}),k="next"===(j=a)?"":d}m("next");var a=new a.Collection(a,function(){return bt(h[0],i[l-1]+d)}),n=(a._ondirectionchange=function(a){m(a)},0);return a._addAlgorithm(function(a,c,d){var e=a.key;if("string"==typeof e){var m=f(e);if(b(m,i,n))return!0;for(var o=null,p=n;p<l;++p){var q=((a,b,c,d,e,f)=>{for(var g=Math.min(a.length,d.length),h=-1,i=0;i<g;++i){var j=b[i];if(j!==d[i])return 0>e(a[i],c[i])?a.substr(0,i)+c[i]+c.substr(i+1):0>e(a[i],d[i])?a.substr(0,i)+d[i]+c.substr(i+1):0<=h?a.substr(0,h)+b[h]+c.substr(h+1):null;0>e(a[i],j)&&(h=i)}return g<d.length&&"next"===f?a+c.substr(a.length):g<a.length&&"prev"===f?a.substr(0,c.length):h<0?null:a.substr(0,h)+d[h]+c.substr(h+1)})(e,m,h[p],i[p],g,j);null===q&&null===o?n=p+1:(null===o||0<g(o,q))&&(o=q)}c(null!==o?function(){a.continue(o+k)}:d)}return!1}),a}function bt(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function bu(a){return{type:1,lower:a,upper:a}}Object.defineProperty(bw.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),bw.prototype.between=function(a,b,c,d){c=!1!==c,d=!0===d;try{return 0<this._cmp(a,b)||0===this._cmp(a,b)&&(c||d)&&(!c||!d)?br(this):new this.Collection(this,function(){return bt(a,b,!c,!d)})}catch(a){return bq(this,aY)}},bw.prototype.equals=function(a){return null==a?bq(this,aY):new this.Collection(this,function(){return bu(a)})},bw.prototype.above=function(a){return null==a?bq(this,aY):new this.Collection(this,function(){return bt(a,void 0,!0)})},bw.prototype.aboveOrEqual=function(a){return null==a?bq(this,aY):new this.Collection(this,function(){return bt(a,void 0,!1)})},bw.prototype.below=function(a){return null==a?bq(this,aY):new this.Collection(this,function(){return bt(void 0,a,!1,!0)})},bw.prototype.belowOrEqual=function(a){return null==a?bq(this,aY):new this.Collection(this,function(){return bt(void 0,a)})},bw.prototype.startsWith=function(a){return"string"!=typeof a?bq(this,aZ):this.between(a,a+aX,!0,!0)},bw.prototype.startsWithIgnoreCase=function(a){return""===a?this.startsWith(a):bs(this,function(a,b){return 0===a.indexOf(b[0])},[a],aX)},bw.prototype.equalsIgnoreCase=function(a){return bs(this,function(a,b){return a===b[0]},[a],"")},bw.prototype.anyOfIgnoreCase=function(){var a=K.apply(J,arguments);return 0===a.length?br(this):bs(this,function(a,b){return -1!==b.indexOf(a)},a,"")},bw.prototype.startsWithAnyOfIgnoreCase=function(){var a=K.apply(J,arguments);return 0===a.length?br(this):bs(this,function(a,b){return b.some(function(b){return 0===a.indexOf(b)})},a,aX)},bw.prototype.anyOf=function(){var a,b,c=this,d=K.apply(J,arguments),e=this._cmp;try{d.sort(e)}catch(a){return bq(this,aY)}return 0===d.length?br(this):((a=new this.Collection(this,function(){return bt(d[0],d[d.length-1])}))._ondirectionchange=function(a){e="next"===a?c._ascending:c._descending,d.sort(e)},b=0,a._addAlgorithm(function(a,c,f){for(var g=a.key;0<e(g,d[b]);)if(++b===d.length)return c(f),!1;return 0===e(g,d[b])||(c(function(){a.continue(d[b])}),!1)}),a)},bw.prototype.notEqual=function(a){return this.inAnyRange([[-1/0,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},bw.prototype.noneOf=function(){var a=K.apply(J,arguments);if(0===a.length)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return bq(this,aY)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[-1/0,b]]},null);return b.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})},bw.prototype.inAnyRange=function(a,b){var c=this,d=this._cmp,e=this._ascending,f=this._descending,g=this._min,h=this._max;if(0===a.length)return br(this);if(!a.every(function(a){return void 0!==a[0]&&void 0!==a[1]&&0>=e(a[0],a[1])}))return bq(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var i,j=!b||!1!==b.includeLowers,k=b&&!0===b.includeUppers,l=e;function m(a,b){return l(a[0],b[0])}try{(i=a.reduce(function(a,b){for(var c=0,e=a.length;c<e;++c){var f=a[c];if(0>d(b[0],f[1])&&0<d(b[1],f[0])){f[0]=g(f[0],b[0]),f[1]=h(f[1],b[1]);break}}return c===e&&a.push(b),a},[])).sort(m)}catch(a){return bq(this,aY)}var n=0,o=k?function(a){return 0<e(a,i[n][1])}:function(a){return 0<=e(a,i[n][1])},p=j?function(a){return 0<f(a,i[n][0])}:function(a){return 0<=f(a,i[n][0])},q=o,b=new this.Collection(this,function(){return bt(i[0][0],i[i.length-1][1],!j,!k)});return b._ondirectionchange=function(a){l="next"===a?(q=o,e):(q=p,f),i.sort(m)},b._addAlgorithm(function(a,b,d){for(var f=a.key;q(f);)if(++n===i.length)return b(d),!1;return!o(f)&&!p(f)||(0===c._cmp(f,i[n][1])||0===c._cmp(f,i[n][0])||b(function(){l===e?a.continue(i[n][0]):a.continue(i[n][1])}),!1)}),b},bw.prototype.startsWithAnyOf=function(){var a=K.apply(J,arguments);return a.every(function(a){return"string"==typeof a})?0===a.length?br(this):this.inAnyRange(a.map(function(a){return[a,a+aX]})):bq(this,"startsWithAnyOf() only works with strings")};var bv=bw;function bw(){}function bx(a){return aF(function(b){return by(b),a(b.target.error),!1})}function by(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var bz="storagemutated",bA="x-storagemutated-1",bB=bd(null,bz),bC=(bD.prototype._lock=function(){return t(!ap.global),++this._reculock,1!==this._reculock||ap.global||(ap.lockOwnerFor=this),this},bD.prototype._unlock=function(){if(t(!ap.global),0==--this._reculock)for(ap.global||(ap.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var a=this._blockedFuncs.shift();try{aT(a[1],a[0])}catch(a){}}return this},bD.prototype._locked=function(){return this._reculock&&ap.lockOwnerFor!==this},bD.prototype.create=function(a){var b=this;if(this.mode){var c=this.db.idbdb,d=this.db._state.dbOpenError;if(t(!this.idbtrans),!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new T.DatabaseClosed(d);case"MissingAPIError":throw new T.MissingAPI(d.message,d);default:throw new T.OpenFailed(d)}if(!this.active)throw new T.TransactionInactive;t(null===this._completion._state),(a=this.idbtrans=a||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=aF(function(c){by(c),b._reject(a.error)}),a.onabort=aF(function(c){by(c),b.active&&b._reject(new T.Abort(a.error)),b.active=!1,b.on("abort").fire(c)}),a.oncomplete=aF(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&bB.storagemutated.fire(a.mutatedParts)})}return this},bD.prototype._promise=function(a,b,c){var d,e=this;return"readwrite"===a&&"readwrite"!==this.mode?aW(new T.ReadOnly("Transaction is readonly")):this.active?this._locked()?new at(function(d,f){e._blockedFuncs.push([function(){e._promise(a,b,c).then(d,f)},ap])}):c?aM(function(){var a=new at(function(a,c){e._lock();var d=b(a,c,e);d&&d.then&&d.then(a,c)});return a.finally(function(){return e._unlock()}),a._lib=!0,a}):((d=new at(function(a,c){var d=b(a,c,e);d&&d.then&&d.then(a,c)}))._lib=!0,d):aW(new T.TransactionInactive)},bD.prototype._root=function(){return this.parent?this.parent._root():this},bD.prototype.waitFor=function(a){var b,c=this._root(),d=at.resolve(a),e=(c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return d}):(c._waitingFor=d,c._waitingQueue=[],b=c.idbtrans.objectStore(c.storeNames[0]),function a(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(b.get(-1/0).onsuccess=a)}()),c._waitingFor);return new at(function(a,b){d.then(function(b){return c._waitingQueue.push(aF(a.bind(null,b)))},function(a){return c._waitingQueue.push(aF(b.bind(null,a)))}).finally(function(){c._waitingFor===e&&(c._waitingFor=null)})})},bD.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},bD.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(k(b,a))return b[a];var c=this.schema[a];if(c)return(c=new this.db.Table(a,c,this)).core=this.db.core.table(a),b[a]=c;throw new T.NotFound("Table "+a+" not part of transaction")},bD);function bD(){}function bE(a,b,c,d,e,f,g,h){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+bF(b),type:h}}function bF(a){return"string"==typeof a?a:a?"["+[].join.call(a,"+")+"]":""}function bG(a,b,c){var d;return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:(d=function(a){return[a.name,a]},c.reduce(function(a,b,c){return(b=d(b,c))&&(a[b[0]]=b[1]),a},{}))}}var bH=function(a){try{return a.only([[]]),bH=function(){return[[]]},[[]]}catch(a){return bH=function(){return aX},aX}};function bI(a){return null==a?function(){}:"string"==typeof a?1===a.split(".").length?function(b){return b[a]}:function(b){return v(b,a)}:function(b){return v(b,a)}}function bJ(a){return[].slice.call(a)}var bK=0;function bL(a){return null==a?":id":"string"==typeof a?a:"[".concat(a.join("+"),"]")}function bM(a,b){var d,e,f,h=b.db,h=(d=a._middlewares,e=h,f=a._deps,e=function(a,b,c){function d(a){if(3===a.type)return null;if(4===a.type)throw Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen,a=a.upperOpen;return void 0===c?void 0===d?null:b.upperBound(d,!!a):void 0===d?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a)}e=c,f=bJ((c=a).objectStoreNames);var e,c={schema:{name:c.name,tables:f.map(function(a){return e.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=g(b),e={},d={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:bI(b)},indexes:bJ(a.indexNames).map(function(b){return a.index(b)}).map(function(a){var b=a.name,c=a.unique,d=a.multiEntry,a=a.keyPath,b={name:b,compound:g(a),keyPath:a,unique:c,multiEntry:d,extractKey:bI(a)};return e[bL(a)]=b}),getIndexByKeyPath:function(a){return e[bL(a)]}};return e[":id"]=d.primaryKey,null!=b&&(e[bL(b)]=d.primaryKey),d})},hasGetAll:0<f.length&&"getAll"in e.objectStore(f[0])&&!("u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},f=c.schema,h=c.hasGetAll,c=f.tables.map(function(a){var b=a.name;return{name:b,schema:a,mutate:function(a){var c=a.trans,e=a.type,f=a.keys,g=a.values,h=a.range;return new Promise(function(a,i){a=aF(a);var j=c.objectStore(b),k=null==j.keyPath,l="put"===e||"add"===e;if(!l&&"delete"!==e&&"deleteRange"!==e)throw Error("Invalid operation type: "+e);var m,n=(f||g||{length:1}).length;if(f&&g&&f.length!==g.length)throw Error("Given keys array must have same length as given values array.");if(0===n)return a({numFailures:0,failures:{},results:[],lastResult:void 0});function o(a){++r,by(a)}var p=[],q=[],r=0;if("deleteRange"===e){if(4===h.type)return a({numFailures:r,failures:q,results:[],lastResult:void 0});3===h.type?p.push(m=j.clear()):p.push(m=j.delete(d(h)))}else{var k=l?k?[g,f]:[g,null]:[f,null],s=k[0],t=k[1];if(l)for(var u=0;u<n;++u)p.push(m=t&&void 0!==t[u]?j[e](s[u],t[u]):j[e](s[u])),m.onerror=o;else for(u=0;u<n;++u)p.push(m=j[e](s[u])),m.onerror=o}function v(b){b=b.target.result,p.forEach(function(a,b){return null!=a.error&&(q[b]=a.error)}),a({numFailures:r,failures:q,results:"delete"===e?f:p.map(function(a){return a.result}),lastResult:b})}m.onerror=function(a){o(a),v(a)},m.onsuccess=v})},getMany:function(a){var c=a.trans,d=a.keys;return new Promise(function(a,e){a=aF(a);for(var f,g=c.objectStore(b),h=d.length,i=Array(h),j=0,k=0,l=function(b){i[(b=b.target)._pos]=b.result,++k===j&&a(i)},m=bx(e),n=0;n<h;++n)null!=d[n]&&((f=g.get(d[n]))._pos=n,f.onsuccess=l,f.onerror=m,++j);0===j&&a(i)})},get:function(a){var c=a.trans,d=a.key;return new Promise(function(a,e){a=aF(a);var f=c.objectStore(b).get(d);f.onsuccess=function(b){return a(b.target.result)},f.onerror=bx(e)})},query:function(a){return new Promise(function(c,e){c=aF(c);var f,g,i,j=a.trans,k=a.values,l=a.limit,m=a.query,n=l===1/0?void 0:l,o=m.index,m=m.range,j=j.objectStore(b),j=o.isPrimaryKey?j:j.index(o.name),o=d(m);if(0===l)return c({result:[]});h?((m=k?j.getAll(o,n):j.getAllKeys(o,n)).onsuccess=function(a){return c({result:a.target.result})},m.onerror=bx(e)):(f=0,g=!k&&"openKeyCursor"in j?j.openKeyCursor(o):j.openCursor(o),i=[],g.onsuccess=function(a){var b=g.result;return b&&(i.push(k?b.value:b.primaryKey),++f!==l)?void b.continue():c({result:i})},g.onerror=bx(e))})},openCursor:function(a){var c=a.trans,e=a.values,f=a.query,g=a.reverse,h=a.unique;return new Promise(function(a,i){a=aF(a);var j=f.index,k=f.range,l=c.objectStore(b),l=j.isPrimaryKey?l:l.index(j.name),j=g?h?"prevunique":"prev":h?"nextunique":"next",m=!e&&"openKeyCursor"in l?l.openKeyCursor(d(k),j):l.openCursor(d(k),j);m.onerror=bx(i),m.onsuccess=aF(function(b){var d,e,f,g,h=m.result;h?(h.___id=++bK,h.done=!1,d=h.continue.bind(h),e=(e=h.continuePrimaryKey)&&e.bind(h),f=h.advance.bind(h),g=function(){throw Error("Cursor not stopped")},h.trans=c,h.stop=h.continue=h.continuePrimaryKey=h.advance=function(){throw Error("Cursor not started")},h.fail=aF(i),h.next=function(){var a=this,b=1;return this.start(function(){return b--?a.continue():a.stop()}).then(function(){return a})},h.start=function(a){function b(){if(m.result)try{a()}catch(a){h.fail(a)}else h.done=!0,h.start=function(){throw Error("Cursor behind last entry")},h.stop()}var c=new Promise(function(a,b){a=aF(a),m.onerror=bx(b),h.fail=b,h.stop=function(b){h.stop=h.continue=h.continuePrimaryKey=h.advance=g,a(b)}});return m.onsuccess=aF(function(a){m.onsuccess=b,b()}),h.continue=d,h.continuePrimaryKey=e,h.advance=f,b(),c},a(h)):a(null)},i)})},count:function(a){var c=a.query,e=a.trans,f=c.index,g=c.range;return new Promise(function(a,c){var h=e.objectStore(b),h=f.isPrimaryKey?h:h.index(f.name),i=d(g),i=i?h.count(i):h.count();i.onsuccess=aF(function(b){return a(b.target.result)}),i.onerror=bx(c)})}}}),i={};return c.forEach(function(a){return i[a.name]=a}),{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){if(i[a])return i[a];throw Error("Table '".concat(a,"' not found"))},MIN_KEY:-1/0,MAX_KEY:bH(b),schema:f}}(e,f=f.IDBKeyRange,b),{dbcore:d.dbcore.reduce(function(a,b){return b=b.create,c(c({},a),b(a))},e)});a.core=h.dbcore,a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table)&&(a[c].core=b.core)})}function bN(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=function a(b,c){return p(b,c)||(b=i(b))&&a(b,c)}(b,c);(!d||"value"in d&&void 0===d.value)&&(b===a.Transaction.prototype||b instanceof a.Transaction?n(b,c,{get:function(){return this.table(c)},set:function(a){m(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function bO(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function bP(a,b){return a._cfg.version-b._cfg.version}function bQ(a,b){var c,d={del:[],add:[],change:[]};for(c in a)b[c]||d.del.push(c);for(c in b){var e=a[c],f=b[c];if(e){var g={name:c,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto)g.recreate=!0,d.change.push(g);else{var h=e.idxByName,i=f.idxByName,j=void 0;for(j in h)i[j]||g.del.push(j);for(j in i){var k=h[j],l=i[j];k?k.src!==l.src&&g.change.push(l):g.add.push(l)}(0<g.del.length||0<g.add.length||0<g.change.length)&&d.change.push(g)}}else d.add.push([c,f])}return d}function bR(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return bT(e,a)})}function bS(a,b){f(a).forEach(function(c){b.db.objectStoreNames.contains(c)||(ac&&console.debug("Dexie: Creating missing table",c),bR(b,c,a[c].primKey,a[c].indexes))})}function bT(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function bU(a,b,c){var d={};return r(b.objectStoreNames,0).forEach(function(a){for(var b=c.objectStore(a),e=bE(bF(i=b.keyPath),i||"",!0,!1,!!b.autoIncrement,i&&"string"!=typeof i,!0),f=[],g=0;g<b.indexNames.length;++g){var h=b.index(b.indexNames[g]),i=h.keyPath,h=bE(h.name,i,!!h.unique,!!h.multiEntry,!1,i&&"string"!=typeof i,!1);f.push(h)}d[a]=bG(a,e,f)}),d}function bV(a,b,c){for(var d=c.db.objectStoreNames,f=0;f<d.length;++f){var g=d[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j,k=h.indexNames[i],l=h.index(k).keyPath,l="string"==typeof l?l:"["+r(l).join("+")+"]";b[g]&&(j=b[g].idxByName[l])&&(j.name=k,delete b[g].idxByName[l],b[g].idxByName[k]=j)}}"u">typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function bW(a){return a.split(",").map(function(a,b){var c=a.split(":"),d=null==(d=c[1])?void 0:d.trim(),c=(a=c[0].trim()).replace(/([&*]|\+\+)/g,""),e=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return bE(c,e||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),g(e),0===b,d)})}function bX(){}function bY(a,b){var c=a._dbNamesDB;return c||(c=a._dbNamesDB=new cw(a_,{addons:[],indexedDB:a,IDBKeyRange:b})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function bZ(a){return a&&"function"==typeof a.databases}function b$(a){return aM(function(){return ap.letThrough=!0,a()})}function b_(a){return!("from"in a)}bX.prototype._createTableSchema=bG,bX.prototype._parseIndexSyntax=bW,bX.prototype._parseStoresSpec=function(a,b){var c=this;f(a).forEach(function(d){if(null!==a[d]){var e=c._parseIndexSyntax(a[d]),f=e.shift();if(!f)throw new T.Schema("Invalid schema for table "+d+": "+a[d]);if(f.unique=!0,f.multi)throw new T.Schema("Primary key cannot be multiEntry*");e.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),f=c._createTableSchema(d,f,e),b[d]=f}})},bX.prototype.stores=function(a){var b=this.db,a=(this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,a):a,b._versions),c={},d={};return a.forEach(function(a){h(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)}),b._dbSchema=d,bO(b,[b._allTables,b,b.Transaction.prototype]),bN(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],f(d),d),b._storeNames=f(d),this},bX.prototype.upgrade=function(a){return this._cfg.contentUpgrade=ab(this._cfg.contentUpgrade||V,a),this};var b0=function(a,b){var c;if(!this)return c=new b0,a&&"d"in a&&h(c,a),c;h(this,arguments.length?{d:1,from:a,to:1<arguments.length?b:a}:{d:0})};function b1(a,b,c){var d=a6(b,c);if(!isNaN(d)){if(0<d)throw RangeError();if(b_(a))return h(a,{from:b,to:c,d:1});var d=a.l,e=a.r;if(0>a6(c,a.from))return d?b1(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null},b5(a);if(0<a6(b,a.to))return e?b1(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null},b5(a);0>a6(b,a.from)&&(a.from=b,a.l=null,a.d=e?e.d+1:1),0<a6(c,a.to)&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1),b=!a.r,d&&!a.l&&b2(a,d),e&&b&&b2(a,e)}}function b2(a,b){b_(b)||function a(b,c){var d=c.from,e=c.l,f=c.r;b1(b,d,c.to),e&&a(b,e),f&&a(b,f)}(a,b)}function b3(a,b){var c=b4(b),d=c.next();if(!d.done)for(var e=d.value,f=b4(a),g=f.next(e.from),h=g.value;!d.done&&!g.done;){if(0>=a6(h.from,e.to)&&0<=a6(h.to,e.from))return!0;0>a6(e.from,h.from)?e=(d=c.next(h.from)).value:h=(g=f.next(e.from)).value}return!1}function b4(a){var b=b_(a)?null:{s:0,n:a};return{next:function(a){for(var c=0<arguments.length;b;)switch(b.s){case 0:if(b.s=1,c)for(;b.n.l&&0>a6(a,b.n.from);)b={up:b,n:b.n.l,s:1};else for(;b.n.l;)b={up:b,n:b.n.l,s:1};case 1:if(b.s=2,!c||0>=a6(a,b.n.to))return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3,b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function b5(a){var b,d,e,f=((null==(f=a.r)?void 0:f.d)||0)-((null==(f=a.l)?void 0:f.d)||0),f=1<f?"r":f<-1?"l":"";f&&(b="r"==f?"l":"r",d=c({},a),e=a[f],a.from=e.from,a.to=e.to,a[f]=e[f],d[f]=e[b],(a[b]=d).d=b6(d)),a.d=b6(a)}function b6(a){var b=a.r,a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function b7(a,b){return f(b).forEach(function(c){a[c]?b2(a[c],b[c]):a[c]=function a(b){var c,d,e={};for(c in b)k(b,c)&&(d=b[c],e[c]=!d||"object"!=typeof d||B.has(d.constructor)?d:a(d));return e}(b[c])}),a}function b8(a,b){return a.all||b.all||Object.keys(a).some(function(c){return b[c]&&b3(b[c],a[c])})}l(b0.prototype,((M={add:function(a){return b2(this,a),this},addKey:function(a){return b1(this,a,a),this},addKeys:function(a){var b=this;return a.forEach(function(a){return b1(b,a,a)}),this},hasKey:function(a){var b=b4(this).next(a).value;return b&&0>=a6(b.from,a)&&0<=a6(b.to,a)}})[G]=function(){return b4(this)},M));var b9={},ca={},cb=!1;function cc(a){b7(ca,a),cb||(cb=!0,setTimeout(function(){cb=!1,cd(ca,(ca={},!1))},0))}function cd(a,b){void 0===b&&(b=!1);var c=new Set;if(a.all)for(var d=0,e=Object.values(b9);d<e.length;d++)ce(h=e[d],a,c,b);else for(var f in a){var g,h,f=/^idb\:\/\/(.*)\/(.*)\//.exec(f);f&&(g=f[1],f=f[2],h=b9["idb://".concat(g,"/").concat(f)])&&ce(h,a,c,b)}c.forEach(function(a){return a()})}function ce(a,b,c,d){for(var e=[],f=0,g=Object.entries(a.queries.query);f<g.length;f++){for(var h=g[f],i=h[0],j=[],k=0,l=h[1];k<l.length;k++){var m=l[k];b8(b,m.obsSet)?m.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(m)}d&&e.push([i,j])}if(d)for(var n=0;n<e.length;n++){var o=e[n],i=o[0],j=o[1];a.queries.query[i]=j}}function cf(a){function b(b){return a.next(b)}var c=e(b),d=e(function(b){return a.throw(b)});function e(a){return function(b){var b=a(b),e=b.value;return b.done?e:e&&"function"==typeof e.then?e.then(c,d):g(e)?Promise.all(e).then(c,d):c(e)}}return e(b)()}function cg(a,b,c){for(var d=g(a)?a.slice():[a],e=0;e<c;++e)d.push(b);return d}var ch={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(a){return c(c({},a),{table:function(b){var d=a.table(b),b=d.schema,e={},f=[];function g(a,b,d){var h=bL(a),i=e[h]=e[h]||[],j=null==a?0:"string"==typeof a?1:a.length,k=0<b,h=c(c({},d),{name:k?"".concat(h,"(virtual-from:").concat(d.name,")"):d.name,lowLevelIndex:d,isVirtual:k,keyTail:b,keyLength:j,extractKey:bI(a),unique:!k&&d.unique});return i.push(h),h.isPrimaryKey||f.push(h),1<j&&g(2===j?a[0]:a.slice(0,j-1),b+1,d),i.sort(function(a,b){return a.keyTail-b.keyTail}),h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(b){var d,e=b.query.index;return e.isVirtual?c(c({},b),{query:{index:e.lowLevelIndex,range:(d=b.query.range,e=e.keyTail,{type:1===d.type?2:d.type,lower:cg(d.lower,d.lowerOpen?a.MAX_KEY:a.MIN_KEY,e),lowerOpen:!0,upper:cg(d.upper,d.upperOpen?a.MIN_KEY:a.MAX_KEY,e),upperOpen:!0})}}):b}return c(c({},d),{schema:c(c({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:function(a){return(a=e[bL(a)])&&a[0]}}),count:function(a){return d.count(l(a))},query:function(a){return d.query(l(a))},openCursor:function(b){var c=b.query.index,e=c.keyTail,f=c.keyLength;return c.isVirtual?d.openCursor(l(b)).then(function(c){var d;return c&&Object.create(d=c,{continue:{value:function(c){null!=c?d.continue(cg(c,b.reverse?a.MAX_KEY:a.MIN_KEY,e)):b.unique?d.continue(d.key.slice(0,f).concat(b.reverse?a.MIN_KEY:a.MAX_KEY,e)):d.continue()}},continuePrimaryKey:{value:function(b,c){d.continuePrimaryKey(cg(b,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return d.primaryKey}},key:{get:function(){var a=d.key;return 1===f?a[0]:a.slice(0,f)}},value:{get:function(){return d.value}}})}):d.openCursor(b)}})}})}};function ci(a,b,c,d){return c=c||{},d=d||"",f(a).forEach(function(e){var f,g,h;k(b,e)?(f=a[e],g=b[e],"object"==typeof f&&"object"==typeof g&&f&&g?(h=F(f))!==F(g)?c[d+e]=b[e]:"Object"===h?ci(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e]):f!==g&&(c[d+e]=b[e])):c[d+e]=void 0}),f(b).forEach(function(e){k(a,e)||(c[d+e]=b[e])}),c}function cj(a,b){return"delete"===b.type?b.keys:b.keys||b.values.map(a.extractKey)}var ck={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return c(c({},a),{table:function(b){var e=a.table(b),f=e.schema.primaryKey;return c(c({},e),{mutate:function(a){var g=ap.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,l=h.updating;switch(a.type){case"add":if(j.fire===V)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===V&&l.fire===V)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===V)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===V)break;return g._promise("readwrite",function(){return function a(b,d,g){return e.query({trans:b,values:!1,query:{index:f,range:d},limit:g}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:b}).then(function(e){return 0<e.numFailures?Promise.reject(e.failures[0]):f.length<g?{failures:[],numFailures:0,lastResult:void 0}:a(b,c(c({},d),{lower:f[f.length-1],lowerOpen:!0}),g)})})}(a.trans,a.range,1e4)},!0)}return e.mutate(a);function m(a){var b,g=ap.trans,h=a.keys||cj(f,a);if(h)return"delete"!==(a="add"===a.type||"put"===a.type?c(c({},a),{keys:h}):c({},a)).type&&(a.values=d([],a.values,!0)),a.keys&&(a.keys=d([],a.keys,!0)),("add"===(b=a).type?Promise.resolve([]):e.getMany({trans:b.trans,keys:h,cache:"immutable"})).then(function(b){var c=h.map(function(c,d){var e,h,m,n=b[d],o={onerror:null,onsuccess:null};return"delete"===a.type?i.fire.call(o,c,n,g):"add"===a.type||void 0===n?(e=j.fire.call(o,c,a.values[d],g),null==c&&null!=e&&(a.keys[d]=c=e,f.outbound||w(a.values[d],f.keyPath,c))):(e=ci(n,a.values[d]),(h=l.fire.call(o,e,c,n,g))&&(m=a.values[d],Object.keys(h).forEach(function(a){k(m,a)?m[a]=h[a]:w(m,a,h[a])}))),o});return e.mutate(a).then(function(d){for(var e=d.failures,f=d.results,g=d.numFailures,d=d.lastResult,i=0;i<h.length;++i){var j=(f||h)[i],k=c[i];null==j?k.onerror&&k.onerror(e[i]):k.onsuccess&&k.onsuccess("put"===a.type&&b[i]?a.values[i]:j)}return{failures:e,results:f,numFailures:g,lastResult:d}}).catch(function(a){return c.forEach(function(b){return b.onerror&&b.onerror(a)}),Promise.reject(a)})});throw Error("Keys missing")}}})}})}};function cl(a,b,c){try{if(!b||b.keys.length<a.length)return null;for(var d=[],e=0,f=0;e<b.keys.length&&f<a.length;++e)0===a6(b.keys[e],a[f])&&(d.push(c?D(b.values[e]):b.values[e]),++f);return d.length===a.length?d:null}catch(a){return null}}var cm={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var d=a.table(b);return c(c({},d),{getMany:function(a){var b;return a.cache?(b=cl(a.keys,a.trans._cache,"clone"===a.cache))?at.resolve(b):d.getMany(a).then(function(b){return a.trans._cache={keys:a.keys,values:"clone"===a.cache?D(b):b},b}):d.getMany(a)},mutate:function(a){return"add"!==a.type&&(a.trans._cache=null),d.mutate(a)}})}}}};function cn(a,b){return"readonly"===a.trans.mode&&!!a.subscr&&!a.trans.explicit&&"disabled"!==a.trans.db._options.cache&&!b.schema.primaryKey.outbound}function co(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var cp={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,d=new b0(a.MIN_KEY,a.MAX_KEY);return c(c({},a),{transaction:function(b,c,d){if(ap.subscr&&"readonly"!==c)throw new T.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ap.querier));return a.transaction(b,c,d)},table:function(e){function h(b){var c,b=b.query;return[c=b.index,new b0(null!=(c=(b=b.range).lower)?c:a.MIN_KEY,null!=(c=b.upper)?c:a.MAX_KEY)]}var i=a.table(e),j=i.schema,k=j.primaryKey,l=j.indexes,m=k.extractKey,n=k.outbound,o=k.autoIncrement&&l.filter(function(a){return a.compound&&a.keyPath.includes(k.keyPath)}),p=c(c({},i),{mutate:function(c){function f(a){return n[a="idb://".concat(b,"/").concat(e,"/").concat(a)]||(n[a]=new b0)}var h,l,m=c.trans,n=c.mutatedParts||(c.mutatedParts={}),p=f(""),q=f(":dels"),r=c.type,s="deleteRange"===c.type?[c.range]:"delete"===c.type?[c.keys]:c.values.length<50?[cj(k,c).filter(function(a){return a}),c.values]:[],t=s[0],s=s[1],u=c.trans._cache;return g(t)?(p.addKeys(t),(r="delete"===r||t.length===s.length?cl(t,u):null)||q.addKeys(t),(r||s)&&(h=r,l=s,j.indexes.forEach(function(a){var b=f(a.name||"");function c(b){return null!=b?a.extractKey(b):null}function d(c){a.multiEntry&&g(c)?c.forEach(function(a){return b.addKey(a)}):b.addKey(c)}(h||l).forEach(function(a,b){var e=h&&c(h[b]),b=l&&c(l[b]);0!==a6(e,b)&&(null!=e&&d(e),null!=b)&&d(b)})}))):t?(s={from:null!=(u=t.lower)?u:a.MIN_KEY,to:null!=(r=t.upper)?r:a.MAX_KEY},q.add(s),p.add(s)):(p.add(d),q.add(d),j.indexes.forEach(function(a){return f(a.name).add(d)})),i.mutate(c).then(function(a){return!t||"add"!==c.type&&"put"!==c.type||(p.addKeys(a.results),o&&o.forEach(function(b){for(var d=c.values.map(function(a){return b.extractKey(a)}),e=b.keyPath.findIndex(function(a){return a===k.keyPath}),g=0,h=a.results.length;g<h;++g)d[g][e]=a.results[g];f(b.name).addKeys(d)})),m.mutatedParts=b7(m.mutatedParts||{},n),a})}}),q={get:function(a){return[k,new b0(a.key)]},getMany:function(a){return[k,(new b0).addKeys(a.keys)]},count:h,query:h,openCursor:h};return f(q).forEach(function(a){p[a]=function(f){var g=ap.subscr,h=!!g,j=cn(ap,i)&&co(a,f)?f.obsSet={}:g;if(h){var k,g=function(a){return j[a="idb://".concat(b,"/").concat(e,"/").concat(a)]||(j[a]=new b0)},l=g(""),o=g(":dels"),h=q[a](f),p=h[0],h=h[1];if(("query"===a&&p.isPrimaryKey&&!f.values?o:g(p.name||"")).add(h),!p.isPrimaryKey){if("count"!==a)return k="query"===a&&n&&f.values&&i.query(c(c({},f),{values:!1})),i[a].apply(this,arguments).then(function(b){if("query"===a){if(n&&f.values)return k.then(function(a){return a=a.result,l.addKeys(a),b});var c,d=f.values?b.result.map(m):b.result;(f.values?l:o).addKeys(d)}else if("openCursor"===a)return c=f.values,b&&Object.create(b,{key:{get:function(){return o.addKey(b.primaryKey),b.key}},primaryKey:{get:function(){var a=b.primaryKey;return o.addKey(a),a}},value:{get:function(){return c&&l.addKey(b.primaryKey),b.value}}});return b});o.add(d)}}return i[a].apply(this,arguments)}}),p}})}};function cq(a,b,d){var e;return 0===d.numFailures?b:"deleteRange"===b.type||(e=b.keys?b.keys.length:"values"in b&&b.values?b.values.length:1,d.numFailures===e)?null:(g((e=c({},b)).keys)&&(e.keys=e.keys.filter(function(a,b){return!(b in d.failures)})),"values"in e&&g(e.values)&&(e.values=e.values.filter(function(a,b){return!(b in d.failures)})),e)}function cr(a,b){var c,d;return c=a,(void 0===(d=b).lower||(d.lowerOpen?0<a6(c,d.lower):0<=a6(c,d.lower)))&&(c=a,void 0===(d=b).upper||(d.upperOpen?0>a6(c,d.upper):0>=a6(c,d.upper)))}function cs(a,b,c,d,e,f){var h,i,j,k,l,m;return c&&0!==c.length&&(i=(h=b.query.index).multiEntry,j=b.query.range,k=d.schema.primaryKey.extractKey,l=h.extractKey,m=(h.lowLevelIndex||h).extractKey,(d=c.reduce(function(a,c){var d=a,e=[];if("add"===c.type||"put"===c.type)for(var f=new b0,h=c.values.length-1;0<=h;--h){var m,n=c.values[h],o=k(n);!f.hasKey(o)&&(m=l(n),i&&g(m)?m.some(function(a){return cr(a,j)}):cr(m,j))&&(f.addKey(o),e.push(n))}switch(c.type){case"add":var p=(new b0).addKeys(b.values?a.map(function(a){return k(a)}):a),d=a.concat(b.values?e.filter(function(a){return a=k(a),!p.hasKey(a)&&(p.addKey(a),!0)}):e.map(function(a){return k(a)}).filter(function(a){return!p.hasKey(a)&&(p.addKey(a),!0)}));break;case"put":var q=(new b0).addKeys(c.values.map(function(a){return k(a)}));d=a.filter(function(a){return!q.hasKey(b.values?k(a):a)}).concat(b.values?e:e.map(function(a){return k(a)}));break;case"delete":var r=(new b0).addKeys(c.keys);d=a.filter(function(a){return!r.hasKey(b.values?k(a):a)});break;case"deleteRange":var s=c.range;d=a.filter(function(a){return!cr(k(a),s)})}return d},a))!==a)?(d.sort(function(a,b){return a6(m(a),m(b))||a6(k(a),k(b))}),b.limit&&b.limit<1/0&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0)),f?Object.freeze(d):d):a}function ct(a,b){return 0===a6(a.lower,b.lower)&&0===a6(a.upper,b.upper)&&!!a.lowerOpen==!!b.lowerOpen&&!!a.upperOpen==!!b.upperOpen}var cu={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name;return c(c({},a),{transaction:function(c,d,e){var f,g,h=a.transaction(c,d,e);return"readwrite"===d&&(e=(f=new AbortController).signal,h.addEventListener("abort",(g=function(e){return function(){if(f.abort(),"readwrite"===d){for(var g=new Set,i=0;i<c.length;i++){var j=c[i],k=b9["idb://".concat(b,"/").concat(j)];if(k){var l=a.table(j),m=k.optimisticOps.filter(function(a){return a.trans===h});if(h._explicit&&e&&h.mutatedParts)for(var n=0,o=Object.values(k.queries.query);n<o.length;n++)for(var p=0,q=(t=o[n]).slice();p<q.length;p++)b8((u=q[p]).obsSet,h.mutatedParts)&&(I(t,u),u.subscribers.forEach(function(a){return g.add(a)}));else if(0<m.length){k.optimisticOps=k.optimisticOps.filter(function(a){return a.trans!==h});for(var r=0,s=Object.values(k.queries.query);r<s.length;r++)for(var t,u,v,w=0,x=(t=s[r]).slice();w<x.length;w++)null!=(u=x[w]).res&&h.mutatedParts&&(e&&!u.dirty?(v=Object.isFrozen(u.res),v=cs(u.res,u.req,m,l,u,v),u.dirty?(I(t,u),u.subscribers.forEach(function(a){return g.add(a)})):v!==u.res&&(u.res=v,u.promise=at.resolve({result:v}))):(u.dirty&&I(t,u),u.subscribers.forEach(function(a){return g.add(a)})))}}}g.forEach(function(a){return a()})}}})(!1),{signal:e}),h.addEventListener("error",g(!1),{signal:e}),h.addEventListener("complete",g(!0),{signal:e})),h},table:function(d){var e=a.table(d),f=e.schema.primaryKey;return c(c({},e),{mutate:function(a){var g,h=ap.trans;return!f.outbound&&"disabled"!==h.db._options.cache&&!h.explicit&&"readwrite"===h.idbtrans.mode&&(g=b9["idb://".concat(b,"/").concat(d)])?(h=e.mutate(a),("add"===a.type||"put"===a.type)&&(50<=a.values.length||cj(f,a).some(function(a){return null==a}))?h.then(function(b){var d=cq(0,c(c({},a),{values:a.values.map(function(a,d){var e;return b.failures[d]?a:(w(e=null!=(e=f.keyPath)&&e.includes(".")?D(a):c({},a),f.keyPath,b.results[d]),e)})}),b);g.optimisticOps.push(d),queueMicrotask(function(){return a.mutatedParts&&cc(a.mutatedParts)})}):(g.optimisticOps.push(a),a.mutatedParts&&cc(a.mutatedParts),h.then(function(b){0<b.numFailures&&(I(g.optimisticOps,a),(b=cq(0,a,b))&&g.optimisticOps.push(b),a.mutatedParts)&&cc(a.mutatedParts)}),h.catch(function(){I(g.optimisticOps,a),a.mutatedParts&&cc(a.mutatedParts)})),h):e.mutate(a)},query:function(a){var c,f,g,h,i,j,k,l,m,n;return cn(ap,e)&&co("query",a)?(c="immutable"===(null==(g=ap.trans)?void 0:g.db._options.cache),f=(g=ap).requery,g=g.signal,k=(j=((a,b,c,d)=>{var e=b9["idb://".concat(a,"/").concat(b)];if(!e)return[];if(!(a=e.queries[c]))return[null,!1,e,null];var f=a[(d.query?d.query.index.name:null)||""];if(!f)return[null,!1,e,null];switch(c){case"query":var g=f.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&ct(a.req.query.range,d.query.range)});return g?[g,!0,e,f]:[f.find(function(a){var b,c;return("limit"in a.req?a.req.limit:1/0)>=d.limit&&(!d.values||a.req.values)&&(b=a.req.query.range,c=d.query.range,0>=((a,b,c,d)=>{if(void 0===a)return void 0!==b?-1:0;if(void 0===b)return 1;if(0===(a=a6(a,b))){if(c&&d)return 0;if(c)return 1;if(d)return -1}return a})(b.lower,c.lower,b.lowerOpen,c.lowerOpen)&&0<=((a,b,c,d)=>{if(void 0===a)return+(void 0!==b);if(void 0===b)return -1;if(0===(a=a6(a,b))){if(c&&d)return 0;if(c)return -1;if(d)return 1}return a})(b.upper,c.upper,b.upperOpen,c.upperOpen))}),!1,e,f];case"count":return[g=f.find(function(a){return ct(a.req.query.range,d.query.range)}),!!g,e,f]}})(b,d,"query",a))[0],h=j[2],i=j[3],k&&j[1]?k.obsSet=a.obsSet:(j=e.query(a).then(function(a){var b=a.result;if(k&&(k.res=b),c){for(var d=0,e=b.length;d<e;++d)Object.freeze(b[d]);Object.freeze(b)}else a.result=D(b);return a}).catch(function(a){return i&&k&&I(i,k),Promise.reject(a)}),k={obsSet:a.obsSet,promise:j,subscribers:new Set,type:"query",req:a,dirty:!1},i?i.push(k):(i=[k],(h=h||(b9["idb://".concat(b,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=i)),l=k,m=i,n=g,l.subscribers.add(f),n.addEventListener("abort",function(){l.subscribers.delete(f),0===l.subscribers.size&&setTimeout(function(){0===l.subscribers.size&&I(m,l)},3e3)}),k.promise.then(function(b){return{result:cs(b.result,a,null==h?void 0:h.optimisticOps,e,k,c)}})):e.query(a)}})}})}};function cv(a,b){return new Proxy(a,{get:function(a,c,d){return"db"===c?b:Reflect.get(a,c,d)}})}cx.prototype.version=function(a){if(isNaN(a)||a<.1)throw new T.Type("Given version is not a positive number");if(a=Math.round(10*a)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];return c||(c=new this.Version(a),b.push(c),b.sort(bP),c.stores({}),this._state.autoSchema=!1),c},cx.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||ap.letThrough||this._vip)?a():new at(function(a,c){if(b._state.openComplete)return c(new T.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return void c(new T.DatabaseClosed);b.open().catch(V)}b._state.dbReadyPromise.then(a,c)}).then(a)},cx.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level,a=a.name,e=(a&&this.unuse({stack:b,name:a}),this._middlewares[b]||(this._middlewares[b]=[]));return e.push({stack:b,create:c,level:null==d?10:d,name:a}),e.sort(function(a,b){return a.level-b.level}),this},cx.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;return b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:!!c&&a.name!==c})),this},cx.prototype.open=function(){var a=this;return aT(ao,function(){return function(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?aW(b.dbOpenError):a});b.isBeingOpened=!0,b.dbOpenError=null,b.openComplete=!1;var d=b.openCanceller,e=Math.round(10*a.verno),g=!1;function h(){if(b.openCanceller!==d)throw new T.DatabaseClosed("db.open() was cancelled")}var i,j=b.dbReadyResolve,k=null,l=!1;return at.race([d,("u"<typeof navigator?at.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(a){function b(){return indexedDB.databases().finally(a)}i=setInterval(b,100),b()}).finally(function(){return clearInterval(i)}):Promise.resolve()).then(function d(){return new at(function(i,j){if(h(),!c)throw new T.MissingAPI;var m=a.name,n=b.autoSchema||!e?c.open(m):c.open(m,e);if(!n)throw new T.MissingAPI;n.onerror=bx(j),n.onblocked=aF(a._fireOnBlocked),n.onupgradeneeded=aF(function(d){var e,h,i,o,p,q,r;k=n.transaction,b.autoSchema&&!a._options.allowEmptyDB?(n.onerror=by,k.abort(),n.result.close(),(e=c.deleteDatabase(m)).onsuccess=e.onerror=aF(function(){j(new T.NoSuchDatabase("Database ".concat(m," doesnt exist")))})):(k.onerror=bx(j),l=(e=d.oldVersion>0x4000000000000000?0:d.oldVersion)<1,a.idbdb=n.result,g&&function(a,b){bS(a._dbSchema,b),b.db.version%10!=0||b.objectStoreNames.contains("$meta")||b.db.createObjectStore("$meta").add(Math.ceil(b.db.version/10-1),"version");var c=bU(0,a.idbdb,b);bV(a,a._dbSchema,b);for(var d=0,e=bQ(c,a._dbSchema).change;d<e.length;d++){var f=(a=>{if(a.change.length||a.recreate)return console.warn("Unable to patch indexes of table ".concat(a.name," because it has changes on the type of index or primary key.")),{value:void 0};var c=b.objectStore(a.name);a.add.forEach(function(b){ac&&console.debug("Dexie upgrade patch: Creating missing index ".concat(a.name,".").concat(b.src)),bT(c,b)})})(e[d]);if("object"==typeof f)return f.value}}(a,k),h=e/10,i=k,o=a._dbSchema,(i.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=bG("$meta",bW("")[0],[]),a._storeNames.push("$meta")),p=a._createTransaction("readwrite",a._storeNames,o)).create(i),p._completion.catch(j),q=p._reject.bind(p),r=ap.transless||ap,aM(function(){if(ap.trans=p,ap.transless=r,0!==h)return bM(a,i),(p.storeNames.includes("$meta")?p.table("$meta").get("version").then(function(a){return null!=a?a:h}):at.resolve(h)).then(function(b){var c=b,d=[],b=a._versions,e=a._dbSchema=bU(0,a.idbdb,i);return 0===(b=b.filter(function(a){return a._cfg.version>=c})).length?at.resolve():(b.forEach(function(b){d.push(function(){var d,g,h,j=e,k=b._cfg.dbschema,l=(bV(a,j,i),bV(a,k,i),e=a._dbSchema=k,bQ(j,k)),m=(l.add.forEach(function(a){bR(i,a[0],a[1].primKey,a[1].indexes)}),l.change.forEach(function(a){if(a.recreate)throw new T.Upgrade("Not yet support for changing primary key");var b=i.objectStore(a.name);a.add.forEach(function(a){return bT(b,a)}),a.change.forEach(function(a){b.deleteIndex(a.name),bT(b,a)}),a.del.forEach(function(a){return b.deleteIndex(a)})}),b._cfg.contentUpgrade);if(m&&b._cfg.version>c)return bM(a,i),p._memoizedTables={},d=x(k),l.del.forEach(function(a){d[a]=j[a]}),bO(a,[a.Transaction.prototype]),bN(a,[a.Transaction.prototype],f(d),d),p.schema=d,(g=L(m))&&aN(),k=at.follow(function(){var a;(h=m(p))&&g&&(a=aO.bind(null,null),h.then(a,a))}),h&&"function"==typeof h.then?at.resolve(h):k.then(function(){return h})}),d.push(function(c){var d=b._cfg.dbschema;[].slice.call(c.db.objectStoreNames).forEach(function(a){return null==d[a]&&c.db.deleteObjectStore(a)}),bO(a,[a.Transaction.prototype]),bN(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),p.schema=a._dbSchema}),d.push(function(c){a.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(a.idbdb.version/10)===b._cfg.version?(a.idbdb.deleteObjectStore("$meta"),delete a._dbSchema.$meta,a._storeNames=a._storeNames.filter(function(a){return"$meta"!==a})):c.objectStore("$meta").put(b._cfg.version,"version"))})}),(function a(){return d.length?at.resolve(d.shift()(p.idbtrans)).then(a):at.resolve()})().then(function(){bS(e,i)}))}).catch(q);f(o).forEach(function(a){bR(i,a,o[a].primKey,o[a].indexes)}),bM(a,i),at.follow(function(){return a.on.populate.fire(p)}).catch(q)}))},j),n.onsuccess=aF(function(){k=null;var c,h,j,o,p=a.idbdb=n.result,q=r(p.objectStoreNames);if(0<q.length)try{var s=p.transaction(1===(j=q).length?j[0]:j,"readonly");if(b.autoSchema)o=p,h=s,a.verno=o.version/10,h=a._dbSchema=bU(0,o,h),a._storeNames=r(o.objectStoreNames,0),bN(a,[a._allTables],f(h),h);else if(bV(a,a._dbSchema,s),c=s,((c=bQ(bU(0,a.idbdb,c),a._dbSchema)).add.length||c.change.some(function(a){return a.add.length||a.change.length}))&&!g)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),p.close(),e=p.version+1,g=!0,i(d());bM(a,s)}catch(a){}a$.push(a),p.onversionchange=aF(function(c){b.vcFired=!0,a.on("versionchange").fire(c)}),p.onclose=aF(function(){a.close({disableAutoOpen:!1})}),l&&(q=a._deps,j=m,bZ(o=q.indexedDB)||j===a_||bY(o,q.IDBKeyRange).put({name:j}).catch(V)),i()},j)}).catch(function(a){switch(null==a?void 0:a.name){case"UnknownError":if(0<b.PR1398_maxLoop)return b.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<e)return e=0,d()}return at.reject(a)})})]).then(function(){return h(),b.onReadyBeingFired=[],at.resolve(b$(function(){return a.on.ready.fire(a.vip)})).then(function c(){var d;if(0<b.onReadyBeingFired.length)return d=b.onReadyBeingFired.reduce(ab,V),b.onReadyBeingFired=[],at.resolve(b$(function(){return d(a.vip)})).then(c)})}).finally(function(){b.openCanceller===d&&(b.onReadyBeingFired=null,b.isBeingOpened=!1)}).catch(function(c){b.dbOpenError=c;try{k&&k.abort()}catch(a){}return d===b.openCanceller&&a._close(),aW(c)}).finally(function(){b.openComplete=!0,j()}).then(function(){var b;return l&&(b={},a.tables.forEach(function(c){c.schema.indexes.forEach(function(d){d.name&&(b["idb://".concat(a.name,"/").concat(c.name,"/").concat(d.name)]=new b0(-1/0,[[[]]]))}),b["idb://".concat(a.name,"/").concat(c.name,"/")]=b["idb://".concat(a.name,"/").concat(c.name,"/:dels")]=new b0(-1/0,[[[]]])}),bB(bz).fire(b),cd(b,!0)),a})}(a)})},cx.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var a=this._state,b=a$.indexOf(this);if(0<=b&&a$.splice(b,1),this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new at(function(b){a.dbReadyResolve=b}),a.openCanceller=new at(function(b,c){a.cancelOpen=c}))},cx.prototype.close=function(a){var a=(void 0===a?{disableAutoOpen:!0}:a).disableAutoOpen,b=this._state;a?(b.isBeingOpened&&b.cancelOpen(new T.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new T.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},cx.prototype.delete=function(a){var b=this,c=(void 0===a&&(a={disableAutoOpen:!0}),0<arguments.length&&"object"!=typeof arguments[0]),d=this._state;return new at(function(e,f){function g(){b.close(a);var c=b._deps.indexedDB.deleteDatabase(b.name);c.onsuccess=aF(function(){var a,c,d;a=b._deps,c=b.name,bZ(d=a.indexedDB)||c===a_||bY(d,a.IDBKeyRange).delete(c).catch(V),e()}),c.onerror=bx(f),c.onblocked=b._fireOnBlocked}if(c)throw new T.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(g):g()})},cx.prototype.backendDB=function(){return this.idbdb},cx.prototype.isOpen=function(){return null!==this.idbdb},cx.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&"DatabaseClosed"===a.name},cx.prototype.hasFailed=function(){return null!==this._state.dbOpenError},cx.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(cx.prototype,"tables",{get:function(){var a=this;return f(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0}),cx.prototype.transaction=function(){var a=(function(a,b,c){var d=arguments.length;if(d<2)throw new T.InvalidArgument("Too few arguments");for(var e=Array(d-1);--d;)e[d-1]=arguments[d];return c=e.pop(),[a,z(e),c]}).apply(this,arguments);return this._transaction.apply(this,a)},cx.prototype._transaction=function(a,b,c){var d,e,f=this,g=ap.trans,h=(g&&g.db===this&&-1===a.indexOf("!")||(g=null),-1!==a.indexOf("?"));a=a.replace("!","").replace("?","");try{if(e=b.map(function(a){if(a=a instanceof f.Table?a.name:a,"string"!=typeof a)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a}),"r"==a||a===a0)d=a0;else{if("rw"!=a&&a!=a1)throw new T.InvalidArgument("Invalid transaction mode: "+a);d=a1}if(g){if(g.mode===a0&&d===a1){if(!h)throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&e.forEach(function(a){if(g&&-1===g.storeNames.indexOf(a)){if(!h)throw new T.SubTransaction("Table "+a+" not included in parent transaction.");g=null}}),h&&g&&!g.active&&(g=null)}}catch(a){return g?g._promise(null,function(b,c){c(a)}):aW(a)}var i=(function a(b,c,d,e,f){return at.resolve().then(function(){var g=ap.transless||ap,h=b._createTransaction(c,d,b._dbSchema,e),g=(h.explicit=!0,{trans:h,transless:g});if(e)h.idbtrans=e.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(e){return e.name===S.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),b.close({disableAutoOpen:!1}),b.open().then(function(){return a(b,c,d,null,f)})):aW(e)}var i,j=L(f),g=(j&&aN(),at.follow(function(){var a;(i=f.call(h,h))&&(j?(a=aO.bind(null,null),i.then(a,a)):"function"==typeof i.next&&"function"==typeof i.throw&&(i=cf(i)))},g));return(i&&"function"==typeof i.then?at.resolve(i).then(function(a){return h.active?a:aW(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return i})).then(function(a){return e&&h._resolve(),h._completion.then(function(){return a})}).catch(function(a){return h._reject(a),aW(a)})})}).bind(null,this,d,e,g,c);return g?g._promise(d,i,"lock"):ap.trans?aT(ap.transless,function(){return f._whenReady(i)}):this._whenReady(i)},cx.prototype.table=function(a){if(k(this._allTables,a))return this._allTables[a];throw new T.InvalidTable("Table ".concat(a," does not exist"))};var cw=cx;function cx(a,b){var d,e,f,g,h,i=this,j=(this._middlewares={},this.verno=0,cx.dependencies),j=(this._options=b=c({addons:cx.addons,autoOpen:!0,indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange,cache:"cloned"},b),this._deps={indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange},b.addons),k=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:V,dbReadyPromise:null,cancelOpen:V,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:b.autoOpen}),l=(k.dbReadyPromise=new at(function(a){k.dbReadyResolve=a}),k.openCanceller=new at(function(a,b){k.cancelOpen=b}),this._state=k,this.name=a,this.on=bd(this,"populate","blocked","versionchange","close",{ready:[ab,V]}),this.once=function(a,b){var c=function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];i.on(a).unsubscribe(c),b.apply(i,d)};return i.on(a,c)},this.on.ready.subscribe=s(this.on.ready.subscribe,function(a){return function(b,c){cx.vip(function(){var d=i._state;d.openComplete?(d.dbOpenError||at.resolve().then(b),c&&a(b)):d.onReadyBeingFired?(d.onReadyBeingFired.push(b),c&&a(b)):(a(b),c||a(function a(){i.on.ready.unsubscribe(b),i.on.ready.unsubscribe(a)}))})}}),this.Collection=(d=this,be(bm.prototype,function(a,b){this.db=d;var c=a3,e=null;if(b)try{c=b()}catch(a){e=a}var b=a._ctx,a=b.table,f=a.hook.reading.fire;this._ctx={table:a,index:b.index,isPrimKey:!b.index||a.schema.primKey.keyPath&&b.index===a.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:e,or:b.or,valueMapper:f!==W?f:null}})),this.Table=(e=this,be(bc.prototype,function(a,b,c){this.db=e,this._tx=c,this.name=a,this.schema=b,this.hook=e._allTables[a]?e._allTables[a].hook:bd(null,{creating:[Z,V],reading:[X,W],updating:[_,V],deleting:[$,V]})})),this.Transaction=(f=this,be(bC.prototype,function(a,b,c,d,e){var g=this;"readonly"!==a&&b.forEach(function(a){(a=null==(a=c[a])?void 0:a.yProps)&&(b=b.concat(a.map(function(a){return a.updatesTable})))}),this.db=f,this.mode=a,this.storeNames=b,this.schema=c,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=bd(this,"complete","error","abort"),this.parent=e||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new at(function(a,b){g._resolve=a,g._reject=b}),this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;return g.active=!1,g.on.error.fire(a),g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort(),aW(a)})})),this.Version=(g=this,be(bX.prototype,function(a){this.db=g,this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(h=this,be(bv.prototype,function(a,b,c){if(this.db=h,this._ctx={table:a,index:":id"===b?null:b,or:c},this._cmp=this._ascending=a6,this._descending=function(a,b){return a6(b,a)},this._max=function(a,b){return 0<a6(a,b)?a:b},this._min=function(a,b){return 0>a6(a,b)?a:b},this._IDBKeyRange=h._deps.IDBKeyRange,!this._IDBKeyRange)throw new T.MissingAPI})),this.on("versionchange",function(a){0<a.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(a.oldVersion/10))}),this._maxKey=bH(b.IDBKeyRange),this._createTransaction=function(a,b,c,d){return new i.Transaction(a,b,c,i._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(a){i.on("blocked").fire(a),a$.filter(function(a){return a.name===i.name&&a!==i&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})},this.use(cm),this.use(cu),this.use(cp),this.use(ch),this.use(ck),new Proxy(this,{get:function(a,b,c){var d;return"_vip"===b||("table"===b?function(a){return cv(i.table(a),l)}:(d=Reflect.get(a,b,c))instanceof bc?cv(d,l):"tables"===b?d.map(function(a){return cv(a,l)}):"_createTransaction"===b?function(){return cv(d.apply(this,arguments),l)}:d)}}));this.vip=l,j.forEach(function(a){return a(i)})}var cy,af="u">typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",cz=(cA.prototype.subscribe=function(a,b,c){return this._subscribe(a&&"function"!=typeof a?a:{next:a,error:b,complete:c})},cA.prototype[af]=function(){return this},cA);function cA(a){this._subscribe=a}try{cy={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(a){cy={indexedDB:null,IDBKeyRange:null}}function cB(a){var b,c=!1,d=new cz(function(d){var e,f=L(a),g=!1,h={},i={},j={get closed(){return g},unsubscribe:function(){g||(g=!0,e&&e.abort(),l&&bB.storagemutated.unsubscribe(n))}},l=(d.start&&d.start(j),!1),m=function(){return aV(o)},n=function(a){b7(h,a),b8(i,h)&&m()},o=function(){var j,o;!g&&cy.indexedDB&&(h={},j={},e&&e.abort(),Promise.resolve((b=>{var c=aB();try{f&&aN();var d=aM(a,b);return d=f?d.finally(aO):d}finally{c&&aC()}})(o={subscr:j,signal:(e=new AbortController).signal,requery:m,querier:a,trans:null})).then(function(a){c=!0,b=a,g||o.signal.aborted||(h={},(a=>{for(var b in a)if(k(a,b))return;return 1})(i=j)||l||(bB(bz,n),l=!0),aV(function(){return!g&&d.next&&d.next(a)}))},function(a){c=!1,["DatabaseClosedError","AbortError"].includes(null==a?void 0:a.name)||g||aV(function(){g||d.error&&d.error(a)})}))};return setTimeout(m,0),j});return d.hasValue=function(){return c},d.getValue=function(){return b},d}function cC(a){var b=cE;try{cE=!0,bB.storagemutated.fire(a),cd(a,!0)}finally{cE=b}}l(cw,c(c({},A),{delete:function(a){return new cw(a,{addons:[]}).delete()},exists:function(a){return new cw(a,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){var b,c;try{return c=(b=cw.dependencies).indexedDB,b=b.IDBKeyRange,(bZ(c)?Promise.resolve(c.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==a_})}):bY(c,b).toCollection().primaryKeys()).then(a)}catch(a){return aW(new T.MissingAPI)}},defineClass:function(){return function(a){h(this,a)}},ignoreTransaction:function(a){return ap.trans?aT(ap.transless,a):a()},vip:b$,async:function(a){return function(){try{var b=cf(a.apply(this,arguments));return b&&"function"==typeof b.then?b:at.resolve(b)}catch(a){return aW(a)}}},spawn:function(a,b,c){try{var d=cf(a.apply(c,b||[]));return d&&"function"==typeof d.then?d:at.resolve(d)}catch(a){return aW(a)}},currentTransaction:{get:function(){return ap.trans||null}},waitFor:function(a,b){return a=at.resolve("function"==typeof a?cw.ignoreTransaction(a):a).timeout(b||6e4),ap.trans?ap.trans.waitFor(a):a},Promise:at,debug:{get:function(){return ac},set:function(a){ac=a}},derive:o,extend:h,props:l,override:s,Events:bd,on:bB,liveQuery:cB,extendObservabilitySet:b7,getByKeyPath:v,setByKeyPath:w,delByKeyPath:function(a,b){"string"==typeof b?w(a,b,void 0):"length"in b&&[].map.call(b,function(b){w(a,b,void 0)})},shallowClone:x,deepClone:D,getObjectDiff:ci,cmp:a6,asap:u,minKey:-1/0,addons:[],connections:a$,errnames:S,dependencies:cy,cache:b9,semVer:"4.3.0",version:"4.3.0".split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,2*c)})})),cw.maxKey=bH(cw.dependencies.IDBKeyRange),"u">typeof dispatchEvent&&"u">typeof addEventListener&&(bB(bz,function(a){cE||(a=new CustomEvent(bA,{detail:a}),cE=!0,dispatchEvent(a),cE=!1)}),addEventListener(bA,function(a){a=a.detail,cE||cC(a)}));var cD,cE=!1,cF=function(){};return"u">typeof BroadcastChannel&&((cF=function(){(cD=new BroadcastChannel(bA)).onmessage=function(a){return a.data&&cC(a.data)}})(),"function"==typeof cD.unref&&cD.unref(),bB(bz,function(a){cE||cD.postMessage(a)})),"u">typeof addEventListener&&(addEventListener("pagehide",function(a){if(!cw.disableBfCache&&a.persisted){ac&&console.debug("Dexie: handling persisted pagehide"),null!=cD&&cD.close();for(var b=0;b<a$.length;b++)a$[b].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(a){!cw.disableBfCache&&a.persisted&&(ac&&console.debug("Dexie: handling persisted pageshow"),cF(),cC({all:new b0(-1/0,[[]])}))})),at.rejectionMapper=function(a,b){return!a||a instanceof O||a instanceof TypeError||a instanceof SyntaxError||!a.name||!U[a.name]?a:(b=new U[a.name](b||a.message,a),"stack"in a&&n(b,"stack",{get:function(){return this.inner.stack}}),b)},c(cw,Object.freeze({__proto__:null,Dexie:cw,Entity:a5,PropModification:ba,RangeSet:b0,add:function(a){return new ba({add:a})},cmp:a6,default:cw,liveQuery:cB,mergeRanges:b2,rangesOverlap:b3,remove:function(a){return new ba({remove:a})},replacePrefix:function(a,b){return new ba({replacePrefix:[a,b]})}}),{default:cw}),cw}()},72433,a=>{"use strict";let b;var c=a.i(42919),d=a.i(66447);let e=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),f=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,d.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:h="",children:i,iconNode:j,...k},l)=>(0,d.createElement)("svg",{ref:l,...g,width:b,height:b,stroke:a,strokeWidth:f?24*Number(c)/Number(b):c,className:e("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,b])=>(0,d.createElement)(a,b)),...Array.isArray(i)?i:[i]])),i=(a,b)=>{let c=(0,d.forwardRef)(({className:c,...g},i)=>(0,d.createElement)(h,{ref:i,iconNode:b,className:e(`lucide-${f(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...g}));return c.displayName=f(a),c},j=i("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),k=i("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),l=i("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=[{Icon:l,name:"add"},{Icon:i("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),name:"image"},{Icon:i("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),name:"camera"},{Icon:i("file-play",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]]),name:"gif"},{Icon:i("locate",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]]),name:"location"}];function n({onSendMessage:a,onToolAction:b,onVoiceInput:e,disabled:f=!1}){let[g,h]=(0,d.useState)(""),i=()=>{let b=g.trim();b&&(a(b),h(""))};return(0,c.jsx)("div",{className:"border-t border-gray-200 bg-[#F5F5F7] px-3 py-3",children:(0,c.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,c.jsx)("div",{className:"flex h-7 items-center gap-4",children:m.map(({Icon:a,name:d})=>(0,c.jsx)("button",{type:"button",onClick:()=>b(d),className:"text-gray-400 transition-colors hover:text-gray-600","aria-label":d,disabled:f,children:(0,c.jsx)(a,{className:"h-5 w-5"})},d))}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),i())},placeholder:"",disabled:f,className:"flex-1 rounded-[20px] border border-gray-200 bg-white px-4 py-2 text-sm placeholder-gray-400 focus:border-blue-500 focus:outline-none disabled:opacity-50"}),(0,c.jsx)("button",{type:"button",onClick:e,className:"flex h-9 w-9 items-center justify-center text-gray-900 transition-colors hover:text-gray-600","aria-label":"Voice input",disabled:f,children:(0,c.jsx)(k,{className:"h-5 w-5"})}),(0,c.jsx)("button",{type:"button",onClick:i,disabled:f||!g.trim(),className:"flex h-9 w-9 items-center justify-center rounded-full bg-[#007AFF] text-white transition-colors hover:bg-blue-600 disabled:opacity-50","aria-label":"Send message",children:(0,c.jsx)(j,{className:"h-4 w-4"})})]})]})})}let o=i("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),p=i("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),q=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},r=a=>{let b=a?q(a):q,c=a=>(function(a,b=a=>a){let c=d.default.useSyncExternalStore(a.subscribe,d.default.useCallback(()=>b(a.getState()),[a,b]),d.default.useCallback(()=>b(a.getInitialState()),[a,b]));return d.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},s=(b=a=>({activeContactId:null,isDrawerOpen:!1,contacts:[],messages:{},setActiveContact:b=>a({activeContactId:b,isDrawerOpen:!1}),toggleDrawer:()=>a(a=>({isDrawerOpen:!a.isDrawerOpen})),setDrawerOpen:b=>a({isDrawerOpen:b}),setContacts:b=>a({contacts:b}),addContact:b=>a(a=>({contacts:[...a.contacts,b]})),setMessages:(b,c)=>a(a=>({messages:{...a.messages,[b]:c}})),addMessage:(b,c)=>a(a=>({messages:{...a.messages,[b]:[...a.messages[b]||[],c]}})),updateMessage:(b,c,d)=>a(a=>({messages:{...a.messages,[b]:(a.messages[b]||[]).map(a=>a.id===c?d(a):a)}}))}))?r(b):r;function t({contact:a}){let b=s(a=>a.toggleDrawer);return(0,c.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-gray-200 bg-[#F5F5F7] px-5",children:[(0,c.jsx)("button",{onClick:b,className:"flex h-6 w-6 items-center justify-center text-gray-900","aria-label":"Open contacts",children:(0,c.jsx)(o,{className:"h-6 w-6"})}),(0,c.jsx)("h1",{className:"text-base font-semibold text-gray-900",children:a?.name||""}),(0,c.jsx)("button",{className:"flex h-6 w-6 items-center justify-center text-gray-900","aria-label":"More options",children:(0,c.jsx)(p,{className:"h-6 w-6"})})]})}let u=i("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);function v({message:a}){let b="user"===a.role;return(0,c.jsx)("div",{className:`flex w-full ${b?"justify-end":"justify-start"}`,children:(0,c.jsxs)("div",{className:"max-w-[260px] rounded-[20px] px-3 py-3",style:{backgroundColor:b?"#007AFF":"#E5E5EA"},children:[a.toolCalls&&a.toolCalls.length>0&&(0,c.jsx)("div",{className:"mb-2 space-y-1",children:a.toolCalls.map(a=>(0,c.jsxs)("div",{className:"rounded-lg bg-white/50 p-2 text-xs",children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 font-semibold",children:[(0,c.jsx)(u,{className:"h-3 w-3"}),(0,c.jsx)("span",{children:a.name})]}),a.result&&(0,c.jsx)("div",{className:"mt-1 text-gray-600",children:a.result})]},a.id))}),(0,c.jsx)("p",{className:`text-sm leading-relaxed ${b?"text-white":"text-gray-900"}`,children:a.content})]})})}let w=i("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),x=i("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),y=i("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),z=i("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),A=i("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function B({card:a,pendingConfirmation:b=!1,onConfirm:d,onDismiss:e}){return(0,c.jsx)("div",{className:"mx-2 my-2 rounded-[16px] border border-gray-200 bg-white p-4",children:(0,c.jsxs)("div",{className:"space-y-3",children:[a.name&&(0,c.jsx)("div",{children:(0,c.jsx)("h4",{className:"text-base font-semibold text-gray-900",children:a.name})}),(0,c.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[a.email&&(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(w,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{children:a.email})]}),a.phone&&(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(x,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{children:a.phone})]}),a.company&&(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(y,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{children:a.company})]}),a.title&&(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(z,{className:"h-4 w-4 flex-shrink-0"}),(0,c.jsx)("span",{children:a.title})]})]}),a.tags&&a.tags.length>0&&(0,c.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a.tags.map((a,b)=>(0,c.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-600",children:[(0,c.jsx)(A,{className:"h-3 w-3"}),a]},b))}),a.notes&&(0,c.jsx)("div",{className:"rounded-lg bg-gray-50 p-2 text-sm text-gray-600",children:a.notes}),b&&(0,c.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,c.jsx)("button",{type:"button",onClick:d,className:"rounded-full bg-[#007AFF] px-3 py-1.5 text-xs font-medium text-white transition-colors hover:bg-blue-600",children:""}),(0,c.jsx)("button",{type:"button",onClick:e,className:"rounded-full border border-gray-300 px-3 py-1.5 text-xs font-medium text-gray-700 transition-colors hover:bg-gray-100",children:""})]})]})})}let C=(0,d.forwardRef)(({messages:a,onConfirmContactCard:b,onDismissContactCard:d},e)=>(0,c.jsx)("div",{ref:e,className:"flex flex-1 flex-col gap-3 overflow-y-auto px-4 py-4",children:a.map(a=>(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)(v,{message:a}),a.contactCard&&(0,c.jsx)(B,{card:a.contactCard,pendingConfirmation:!!a.pendingContactCardConfirmation,onConfirm:()=>b(a.id),onDismiss:()=>d(a.id)})]},a.id))}));C.displayName="MessageList";let D=i("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function E({onAddContact:a}){let{isDrawerOpen:b,setDrawerOpen:d,contacts:e,activeContactId:f,setActiveContact:g}=s();return b?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"fixed inset-0 z-40 bg-black/20",onClick:()=>d(!1)}),(0,c.jsxs)("aside",{className:"fixed left-0 top-0 z-50 flex h-full w-[280px] flex-col border-r border-gray-200 bg-white",children:[(0,c.jsxs)("header",{className:"flex h-16 items-center justify-between border-b border-gray-200 px-4",children:[(0,c.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:""}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("button",{type:"button",className:"flex h-6 w-6 items-center justify-center text-blue-500","aria-label":"Add contact",onClick:a,children:(0,c.jsx)(l,{className:"h-5 w-5"})}),(0,c.jsx)("button",{type:"button",onClick:()=>d(!1),className:"flex h-6 w-6 items-center justify-center text-gray-400","aria-label":"Close drawer",children:(0,c.jsx)(D,{className:"h-5 w-5"})})]})]}),(0,c.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[e.map(a=>{let b=a.id===f;return(0,c.jsxs)("button",{type:"button",onClick:()=>g(a.id),className:`flex w-full items-center gap-3 rounded-xl px-3 py-2 text-left transition-colors ${b?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,c.jsx)("div",{className:"flex h-10 flex-shrink-0 items-center justify-center rounded-full text-sm font-medium text-white",style:{backgroundColor:a.avatarColor},children:a.name.charAt(0).toUpperCase()}),(0,c.jsx)("span",{className:"flex-1 truncate text-sm font-medium text-gray-900",children:a.name})]},a.id)}),0===e.length&&(0,c.jsx)("div",{className:"py-8 text-center text-sm text-gray-400",children:""})]})]})]}):null}var F=a.i(99846);let G=Symbol.for("Dexie"),H=globalThis[G]||(globalThis[G]=F.default);if(F.default.semVer!==H.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${F.default.semVer} and ${H.semVer}`);let{liveQuery:I,mergeRanges:J,rangesOverlap:K,RangeSet:L,cmp:M,Entity:N,PropModification:O,replacePrefix:P,add:Q,remove:R,DexieYProvider:S}=H,T=H,U=new class extends T{contacts;messages;conversations;contactCards;constructor(){super("FriendsAI"),this.version(1).stores({contacts:"id, name, createdAt, updatedAt",messages:"id, contactId, role, createdAt",conversations:"id, contactId, lastMessageAt, messageCount",contactCards:"id, name, email, phone, company, createdAt, sourceMessageId"})}};async function V(){return U.contacts.orderBy("updatedAt").reverse().toArray()}async function W(a){await U.contacts.put(a)}async function X(a){return U.messages.where("contactId").equals(a).sortBy("createdAt")}async function Y(a){await U.messages.put(a)}async function Z(a){await U.contactCards.put(a)}let $=["#007AFF","#34C759","#FF9500","#AF52DE","#FF3B30","#5856D6","#FFCC00"],_=[{id:"contact-zhangsan",name:"",avatarColor:$[0],createdAt:new Date,updatedAt:new Date},{id:"contact-lisi",name:"",avatarColor:$[1],createdAt:new Date,updatedAt:new Date}];function aa(a){return`${a}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function ab(a){return"add"===a?"":"image"===a?"":"camera"===a?"":"gif"===a?"GIF":""}function ac(){let{activeContactId:a,contacts:b,messages:e,setContacts:f,addContact:g,setActiveContact:h,setMessages:i,addMessage:j,updateMessage:k}=s(),[l,m]=(0,d.useState)(!1),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)("sync"),u=(0,d.useRef)(null);(0,d.useEffect)(()=>{(async()=>{try{let a=await V(),b=a.length>0?a:_;0===a.length&&await Promise.all(b.map(a=>W(a))),f(b),b.length>0&&h(b[0].id)}catch{f(_),h(_[0].id)}})()},[h,f]),(0,d.useEffect)(()=>{(async()=>{if(a)try{let b=await X(a);i(a,b)}catch{i(a,[])}})()},[a,i]),(0,d.useEffect)(()=>{u.current?.scrollIntoView({behavior:"smooth"})},[a,e]);let v=b.find(b=>b.id===a)??null,w=a?e[a]??[]:[],x=async(a,b,c)=>{let d=(e[a]??[]).find(a=>a.id===b);if(!d)return;let f=c(d);k(a,b,c);try{await Y(f)}catch{}},y=async b=>{if(!a)return;let c=(e[a]??[]).find(a=>a.id===b);if(c?.contactCard){try{await Z(c.contactCard)}catch{}await x(a,b,a=>({...a,pendingContactCardConfirmation:!1}))}},z=async b=>{a&&await x(a,b,a=>({...a,pendingContactCardConfirmation:!1}))},A=async()=>{var a;let c={id:aa("contact"),name:(a=b.length,`${a+1}`),avatarColor:$[b.length%$.length],createdAt:new Date,updatedAt:new Date};g(c),h(c.id);try{await W(c)}catch{}},B=async b=>{if(!a)return;let c={id:aa("tool-action"),contactId:a,role:"assistant",content:"",toolCalls:[{id:aa("tool-call"),name:ab(b),arguments:{},result:`${ab(b)}`}],createdAt:new Date};j(a,c);try{await Y(c)}catch{}},D=async()=>{if(!a)return;let b={id:aa("voice-hint"),contactId:a,role:"assistant",content:"",createdAt:new Date};j(a,b);try{await Y(b)}catch{}},F=async b=>{if(!a||!v)return;let c=b.trim();if(!c)return;let d={id:aa("user"),contactId:a,role:"user",content:c,createdAt:new Date};j(a,d);try{await Y(d)}catch{}m(!0);let e=null,f=o?{enabled:["extract_contact_info","feishu_template_message"],feishuTemplateMessage:{mode:q}}:{enabled:["extract_contact_info"]};try{let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contact:v,messages:[...w,d].filter(a=>a.content.trim().length>0).map(a=>({role:a.role,content:a.content})),tools:f})});if(!a.ok)throw Error("");e=await a.json()}catch{let b={id:aa("assistant-error"),contactId:a,role:"assistant",content:" AI ",createdAt:new Date};j(a,b);try{await Y(b)}catch{}m(!1);return}if(e.toolResult){let b=e.contactCard?{...e.contactCard,createdAt:new Date(e.contactCard.createdAt)}:void 0,c={id:aa("assistant-tool"),contactId:a,role:"assistant",content:"",toolCalls:[{id:aa("extract-contact"),name:"extract_contact_info",arguments:{},result:e.toolResult}],contactCard:b,pendingContactCardConfirmation:!!b,createdAt:new Date};j(a,c);try{await Y(c)}catch{}}let g={id:aa("assistant"),contactId:a,role:"assistant",content:e.reply||"",createdAt:new Date};j(a,g);try{await Y(g)}catch{}m(!1)};return(0,c.jsxs)("div",{className:"flex h-screen w-full flex-col bg-[#F5F5F7]",children:[(0,c.jsx)(E,{onAddContact:A}),(0,c.jsxs)("main",{className:"flex flex-1 flex-col",children:[(0,c.jsx)(t,{contact:v}),(0,c.jsx)(C,{messages:w,onConfirmContactCard:y,onDismissContactCard:z}),(0,c.jsx)("div",{ref:u}),(0,c.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-2 text-xs text-gray-600",children:[(0,c.jsxs)("label",{className:"flex items-center gap-2",children:[(0,c.jsx)("input",{type:"checkbox",checked:o,onChange:a=>p(a.target.checked),disabled:l}),(0,c.jsx)("span",{children:""})]}),(0,c.jsxs)("label",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{children:""}),(0,c.jsxs)("select",{value:q,onChange:a=>r(a.target.value),disabled:!o||l,className:"rounded border border-gray-300 bg-white px-2 py-1 text-xs",children:[(0,c.jsx)("option",{value:"sync",children:"sync"}),(0,c.jsx)("option",{value:"preview",children:"preview"})]})]})]}),(0,c.jsx)(n,{onSendMessage:F,onToolAction:B,onVoiceInput:D,disabled:l})]})]})}a.s(["default",()=>ac],72433)}];

//# sourceMappingURL=OnePersonCompany_friendsAI_631d5f87._.js.map