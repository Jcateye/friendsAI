{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "profileSummary",
    "relationshipSignals",
    "opportunities",
    "risks",
    "suggestedActions",
    "openingLines",
    "citations"
  ],
  "properties": {
    "profileSummary": { "type": "string" },
    "relationshipSignals": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["type", "description"],
        "properties": {
          "type": { "type": "string" },
          "description": { "type": "string" },
          "confidence": { "type": "number", "minimum": 0, "maximum": 1 }
        }
      }
    },
    "opportunities": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["title", "description", "priority"],
        "properties": {
          "title": { "type": "string" },
          "description": { "type": "string" },
          "priority": { "type": "string", "enum": ["low", "medium", "high"] },
          "citations": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "risks": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["title", "description", "severity"],
        "properties": {
          "title": { "type": "string" },
          "description": { "type": "string" },
          "severity": { "type": "string", "enum": ["low", "medium", "high"] },
          "citations": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "suggestedActions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["action", "reason", "priority"],
        "properties": {
          "action": { "type": "string" },
          "reason": { "type": "string" },
          "priority": { "type": "string", "enum": ["low", "medium", "high"] },
          "citations": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "openingLines": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["line", "context"],
        "properties": {
          "line": { "type": "string" },
          "context": { "type": "string" },
          "citations": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "citations": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["type", "reference"],
        "properties": {
          "type": { "type": "string", "enum": ["message", "conversation", "event", "fact"] },
          "reference": { "type": "string" },
          "span": { "type": "string" }
        }
      }
    }
  }
}




